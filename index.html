<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FinTrend News | Market Newsletter</title>

  <meta name="description" content="FinTrend News — desk-style market briefs. Drivers, scenarios, levels. Free articles + premium tools." />

  <link rel="icon" type="image/png" href="assets/img/favicon.png" />
  <link rel="apple-touch-icon" href="assets/img/favicon.png" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet" />

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-KSK5YVPJBR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-KSK5YVPJBR');
  </script>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    :root{
      --bg:#050816;
      --bg-elevated:#0b1020;
      --accent:#f4c15d;
      --accent-soft:rgba(244,193,93,0.12);
      --text-main:#f9fafb;
      --text-muted:#9ca3af;
      --border-subtle:rgba(148,163,184,0.35);
      --radius-lg:18px;
      --radius-xl:24px;
      --shadow-soft:0 18px 45px rgba(15, 23, 42, 0.8);
      --max-width:1150px;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{color:var(--text-main)}
    body{
      font-family:"Inter",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      line-height:1.6;
      min-height:100vh;
      background-image:
        radial-gradient(circle at top, rgba(17, 24, 39, 0.78) 0, rgba(2, 6, 23, 0.82) 45%, rgba(0, 0, 0, 0.92) 100%),
        url("assets/img/bg-candles.png");
      background-size:cover;
      background-position:center;
      background-repeat:no-repeat;
      background-attachment:fixed;
    }
    body::before{
      content:"";
      position:fixed;
      inset:0;
      background:linear-gradient(to bottom, rgba(2,6,23,0.18), rgba(2,6,23,0.35) 40%, rgba(2,6,23,0.60));
      pointer-events:none;
      z-index:-1;
    }

    a{color:#e5e7eb;text-decoration:none}
    a:hover{color:var(--accent)}

    .page{
      max-width:var(--max-width);
      margin:16px auto 90px;
      padding:0 16px 42px;
      position:relative;
    }

    /* Sticky header */
    .top-header{
      position:sticky;
      top:0;
      z-index:9999;
      border-radius:var(--radius-xl);
      background:linear-gradient(135deg, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.82));
      border:1px solid rgba(148, 163, 184, 0.25);
      box-shadow:0 8px 24px rgba(15, 23, 42, 0.6);
      overflow:hidden;
      margin-bottom:14px;
      backdrop-filter:blur(6px);
    }

    .ticker-row{
      padding:4px 18px;
      background:radial-gradient(circle at top, #020617 0, #000 65%);
      border-bottom:1px solid rgba(148, 163, 184, 0.35);
    }
    .ticker-row .tradingview-widget-container{height:28px}

    .header-main{
      display:grid;
      grid-template-columns:auto 1fr auto;
      align-items:center;
      padding:18px 22px 20px;
      gap:14px;
    }
    .logo-img{height:56px;width:auto;display:block}
    .header-center{text-align:center}
    .brand-title{
      font-family:"Playfair Display","Times New Roman",serif;
      font-size:32px;
      letter-spacing:0.18em;
      text-transform:uppercase;
      color:var(--accent);
      line-height:1.05;
    }
    .brand-subtitle{
      margin-top:6px;
      font-size:12px;
      color:var(--text-muted);
      letter-spacing:0.14em;
      text-transform:uppercase;
    }
    .header-right{
      display:flex;
      align-items:center;
      gap:14px;
      justify-self:end;
      flex-wrap:wrap;
    }
    .header-link{
      font-size:12px;
      color:var(--text-muted);
      letter-spacing:0.08em;
      text-transform:uppercase;
      transition:0.2s ease;
    }
    .header-link:hover{color:var(--text-main)}
    .subscribe-btn{
      padding:7px 16px;
      border-radius:999px;
      background:var(--accent);
      color:#000 !important;
      font-size:12px;
      font-weight:800;
      letter-spacing:0.08em;
      text-transform:uppercase;
      transition:0.2s ease;
      box-shadow:0 10px 30px rgba(244,193,93,0.15);
    }
    .subscribe-btn:hover{background:#f7d680;transform:translateY(-1px)}
    .social-icons{display:flex;gap:10px}
    .social-icon{font-size:14px;color:var(--text-muted);transition:0.2s ease}
    .social-icon:hover{color:var(--accent)}

    @media (max-width:830px){
      .header-main{grid-template-columns:1fr;row-gap:10px;justify-items:flex-start;padding:14px 18px 18px}
      .header-center{text-align:left}
      .brand-title{font-size:26px}
      .logo-img{height:46px}
    }

    /* Highly-visible bubble */
    .archive-bubble{
      position:fixed;
      top:94px;
      right:18px;
      z-index:100000;
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid rgba(244,193,93,0.55);
      background:rgba(2,6,23,0.55);
      backdrop-filter:blur(6px);
      box-shadow:0 18px 50px rgba(0,0,0,0.35);
      color:var(--text-main);
      font-size:12px;
      letter-spacing:0.14em;
      text-transform:uppercase;
      transition:transform .12s ease, opacity .12s ease, background .12s ease;
    }
    .archive-bubble:hover{transform:translateY(-1px);background:rgba(2,6,23,0.72)}
    .archive-bubble .dot{
      width:9px;height:9px;border-radius:999px;
      background:rgba(244,193,93,0.95);
      box-shadow:0 0 0 5px rgba(244,193,93,0.12);
    }
    @media (max-width:830px){
      .archive-bubble{top:116px;right:14px}
    }

    /* Hero */
    .hero{
      min-height:66vh;
      display:grid;
      place-items:center;
      padding:18px 0 10px;
    }
    .hero-card{
      width:100%;
      border-radius:var(--radius-xl);
      border:1px solid rgba(148, 163, 184, 0.22);
      background:rgba(15, 23, 42, 0.72);
      box-shadow:0 18px 45px rgba(15, 23, 42, 0.75);
      overflow:hidden;
      backdrop-filter:blur(8px);
      position:relative;
    }
    .hero-card::before{
      content:"";
      position:absolute;
      inset:0;
      background:radial-gradient(circle at top left, rgba(244,193,93,0.10), transparent 55%);
      pointer-events:none;
    }
    .hero-inner{
      position:relative;
      z-index:1;
      padding:22px 22px 18px;
      display:grid;
      grid-template-columns: 1.25fr 0.75fr;
      gap:16px;
      align-items:start;
    }
    @media (max-width:920px){.hero-inner{grid-template-columns:1fr}}

    .hero-kicker{
      font-size:11px;
      color:var(--text-muted);
      text-transform:uppercase;
      letter-spacing:0.18em;
      margin-bottom:8px;
    }
    .hero-title{
      font-family:"Playfair Display","Times New Roman",serif;
      font-size:40px;
      line-height:1.08;
      margin-bottom:10px;
    }
    .hero-title span{
      background:linear-gradient(135deg, #fef3c7, #fbbf24, #fb923c);
      -webkit-background-clip:text;
      color:transparent;
    }
    .hero-sub{
      color:#e5e7eb;
      font-size:15px;
      max-width:720px;
      margin-bottom:14px;
    }

    .hero-highlights{
      display:grid;
      grid-template-columns:repeat(3,minmax(0,1fr));
      gap:10px;
      margin-top:10px;
      margin-bottom:10px;
    }
    @media (max-width:920px){.hero-highlights{grid-template-columns:1fr}}
    .hero-h{
      border-radius:18px;
      border:1px solid rgba(148,163,184,0.22);
      background:rgba(2,6,23,0.30);
      padding:12px 12px 10px;
      position:relative;
      overflow:hidden;
    }
    .hero-h::before{
      content:"";
      position:absolute;
      inset:-40%;
      background:radial-gradient(circle at top right, rgba(244,193,93,0.10), transparent 60%);
      pointer-events:none;
      opacity:0.8;
    }
    .hero-h strong{position:relative;z-index:1;display:block;font-size:13px;color:#e5e7eb;margin-bottom:4px}
    .hero-h span{position:relative;z-index:1;display:block;font-size:12px;color:var(--text-muted);line-height:1.45}

    .hero-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{
      font-size:12px;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.45);
      background:rgba(2,6,23,0.40);
      color:var(--text-main);
      text-transform:uppercase;
      letter-spacing:0.14em;
      transition:0.18s ease;
      display:inline-flex;
      align-items:center;
      gap:8px;
      cursor:pointer;
    }
    .btn:hover{transform:translateY(-1px);border-color:rgba(244,193,93,0.35)}
    .btn.primary{background:var(--accent);color:#000 !important;border-color:var(--accent);font-weight:900}
    .btn.primary:hover{background:#f7d680}

    .hero-note{margin-top:12px;font-size:11px;color:var(--text-muted)}

    .hero-right-stack{
      display:flex;
      flex-direction:column;
      gap:12px;
      align-self:start;
    }
    .hero-right{
      border-radius:var(--radius-lg);
      border:1px solid rgba(148,163,184,0.24);
      background:rgba(2,6,23,0.35);
      padding:14px 14px 12px;
    }
    .hero-right-title{
      font-size:11px;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.18em;margin-bottom:10px
    }
    .snapshot-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
    .snap{
      border-radius:16px;border:1px solid rgba(148,163,184,0.22);
      background:rgba(15,23,42,0.65);
      padding:10px 10px 9px;
      transition:0.18s ease;
      position:relative;
      overflow:hidden;
    }
    .snap:hover{transform:translateY(-1px);border-color:rgba(244,193,93,0.35);background:rgba(15,23,42,0.78)}
    .snap.flash::before{
      content:"";
      position:absolute;
      inset:-40%;
      background:radial-gradient(circle at top, rgba(244,193,93,0.22), transparent 55%);
      opacity:0.85;
      pointer-events:none;
      animation:pulseGlow 1.2s ease-in-out 1;
    }
    .snap-top{display:flex;justify-content:space-between;align-items:baseline;gap:8px;margin-bottom:6px}
    .snap-label{font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:var(--text-muted)}
    .snap-chip{
      font-size:10px;letter-spacing:0.12em;text-transform:uppercase;
      padding:3px 8px;border-radius:999px;border:1px solid rgba(148,163,184,0.28);
      background:rgba(2,6,23,0.35);color:var(--text-muted);white-space:nowrap;
    }
    .snap-body{font-size:12px;color:#e5e7eb;line-height:1.35}

    .hero-right-premium{
      border-radius:var(--radius-lg);
      border:1px solid rgba(148,163,184,0.24);
      background:rgba(2,6,23,0.35);
      padding:14px 14px 12px;
      position:relative;
      overflow:hidden;
    }
    .hero-right-premium::before{
      content:"";
      position:absolute;
      inset:-40%;
      background:radial-gradient(circle at top left, rgba(147,197,253,0.14), transparent 60%);
      pointer-events:none;
      opacity:0.75;
    }
    .hero-right-premium h3{
      position:relative;
      z-index:1;
      margin:0;
      font-size:13px;
      font-weight:800;
      color:#e5e7eb;
      letter-spacing:0.02em;
    }
    .hero-right-premium p{
      position:relative;
      z-index:1;
      margin-top:8px;
      font-size:12px;
      color:var(--text-muted);
      line-height:1.55;
    }
    .hero-right-premium ul{
      position:relative;
      z-index:1;
      margin:10px 0 0 16px;
      font-size:12px;
      color:#e5e7eb;
      line-height:1.5;
    }
    .hero-right-premium li{margin:0 0 6px}

    .chips-row{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:10px;
      position:relative;
      z-index:1;
    }
    .chip{
      font-size:10px;
      letter-spacing:0.16em;
      text-transform:uppercase;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.28);
      background:rgba(2,6,23,0.30);
      color:var(--text-muted);
      display:inline-flex;
      align-items:center;
      gap:8px;
      user-select:none;
    }
    .chip .c-dot{width:7px;height:7px;border-radius:999px;background:rgba(244,193,93,0.9);box-shadow:0 0 0 4px rgba(244,193,93,0.10)}

    .mini-link{
      font-size:12px;
      text-decoration:none;
      color:var(--accent) !important;
      border:1px solid rgba(244,193,93,0.45);
      background:rgba(244,193,93,0.08);
      padding:8px 12px;
      border-radius:999px;
      letter-spacing:0.12em;
      text-transform:uppercase;
      transition:0.18s ease;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .mini-link:hover{transform:translateY(-1px);background:rgba(244,193,93,0.14)}
    .mini-link.secondary{
      color:#e5e7eb !important;
      border-color:rgba(148,163,184,0.30);
      background:rgba(2,6,23,0.30);
    }

    @keyframes pulseGlow{
      0%{transform:scale(0.98);opacity:0.2}
      50%{transform:scale(1.03);opacity:0.85}
      100%{transform:scale(1.0);opacity:0.25}
    }

    /* Panels */
    .panel{
      background:rgba(15, 23, 42, 0.90);
      border-radius:var(--radius-xl);
      border:1px solid var(--border-subtle);
      box-shadow:var(--shadow-soft);
      padding:20px 20px 18px;
      position:relative;
      overflow:hidden;
      margin-top:18px;
      backdrop-filter:blur(6px);
    }
    .panel::before{
      content:"";
      position:absolute;
      inset:0;
      background:radial-gradient(circle at top left, rgba(250, 204, 21, 0.07), transparent 55%);
      pointer-events:none;
    }
    .panel-header{
      display:flex;justify-content:space-between;align-items:baseline;gap:12px;margin-bottom:16px;
      position:relative;z-index:1;
    }
    .panel-title{font-size:13px;text-transform:uppercase;letter-spacing:0.16em;color:var(--text-muted)}
    .panel-subtitle{font-size:11px;color:var(--text-muted)}
    .time-indicator{font-size:11px;color:var(--accent);text-transform:uppercase;letter-spacing:0.14em}

    /* Scroll reveal */
    .reveal{opacity:1;transform:none}
    .sr .reveal{
      opacity:0;
      transform:translateY(12px);
      transition:opacity 0.6s ease, transform 0.6s ease;
      will-change:opacity,transform;
    }
    .sr .reveal.in-view{opacity:1;transform:translateY(0)}

    /* How tiles */
    .tiles-grid{
      display:grid;
      grid-template-columns:repeat(3,minmax(0,1fr));
      gap:12px;
      position:relative;
      z-index:1;
      align-items:stretch;
    }
    @media (max-width:900px){.tiles-grid{grid-template-columns:1fr}}
    .tile{
      border-radius:var(--radius-lg);
      border:1px solid rgba(148,163,184,0.28);
      background:rgba(2,6,23,0.38);
      padding:18px 18px 16px;
      box-shadow:0 14px 35px rgba(15,23,42,0.45);
      transition:transform 0.18s ease, border-color 0.18s ease;
      overflow:hidden;
      position:relative;
    }
    .tile:hover{transform:translateY(-2px);border-color:rgba(244,193,93,0.35)}
    .tile::before{
      content:"";
      position:absolute;
      inset:-30%;
      background:radial-gradient(circle at top right, rgba(244,193,93,0.10), transparent 55%);
      pointer-events:none;
      opacity:0.85;
    }
    .tile-top{position:relative;z-index:1;display:flex;justify-content:space-between;gap:10px;align-items:baseline;margin-bottom:10px}
    .tile-num{font-size:11px;letter-spacing:0.18em;text-transform:uppercase;color:var(--text-muted)}
    .tile-pill{
      font-size:10px;letter-spacing:0.18em;text-transform:uppercase;
      padding:4px 8px;border-radius:999px;border:1px solid rgba(148,163,184,0.35);
      background:rgba(2,6,23,0.35);color:var(--text-muted);white-space:nowrap;
    }
    .tile-title{position:relative;z-index:1;font-weight:700;color:#e5e7eb;line-height:1.25;margin-bottom:8px}
    .tile-line{position:relative;z-index:1;color:var(--text-muted);font-size:12px}

    /* Content grids */
    .two-col{position:relative;z-index:1;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;align-items:stretch}
    @media (max-width:900px){.two-col{grid-template-columns:1fr}}

    .card{
      border-radius:var(--radius-lg);
      border:1px solid rgba(148,163,184,0.26);
      background:rgba(2,6,23,0.34);
      padding:16px 16px 14px;
      transition:0.18s ease;
      overflow:hidden;
      position:relative;
    }
    .card:hover{transform:translateY(-2px);border-color:rgba(244,193,93,0.35);background:rgba(2,6,23,0.42)}
    .card-top{display:flex;justify-content:space-between;gap:10px;align-items:baseline;margin-bottom:8px}
    .card-tag{font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:var(--text-muted)}
    .card-date{font-size:10px;color:var(--text-muted)}
    .card-title{font-size:16px;font-weight:700;line-height:1.25;margin-bottom:8px;color:#e5e7eb}
    .card-desc{font-size:12px;color:var(--text-muted);margin-bottom:10px;line-height:1.55}
    .card-actions{display:flex;gap:10px;flex-wrap:wrap}

    .search-row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-bottom:12px;
      position:relative;
      z-index:1;
    }
    .search-row input{
      flex:1 1 260px;
      background: rgba(2,6,23,0.35);
      border:1px solid rgba(148,163,184,0.22);
      color: var(--text-main);
      border-radius:14px;
      padding:10px 12px;
      outline:none;
      font-size:13px;
    }
    .search-row input:focus{
      border-color:rgba(244,193,93,0.6);
      box-shadow:0 0 0 4px rgba(244,193,93,0.10);
    }

    /* Wheel */
    .wheel-wrap{
      position:relative;
      z-index:1;
      display:grid;
      grid-template-columns: 0.95fr 1.05fr;
      gap:14px;
      align-items:stretch;
    }
    @media (max-width:980px){
      .wheel-wrap{grid-template-columns:1fr}
    }
    .wheel-left{
      border-radius:var(--radius-lg);
      border:1px solid rgba(148,163,184,0.26);
      background:rgba(2,6,23,0.34);
      padding:16px 16px 14px;
      position:relative;
      overflow:hidden;
    }
    .wheel-left::before{
      content:"";
      position:absolute;
      inset:-35%;
      background:radial-gradient(circle at top right, rgba(244,193,93,0.10), transparent 58%);
      pointer-events:none;
      opacity:0.85;
    }
    .wheel-kicker{
      position:relative;
      z-index:1;
      font-size:10px;
      letter-spacing:0.18em;
      text-transform:uppercase;
      color:var(--text-muted);
      margin-bottom:10px;
    }
    .wheel-headline{
      position:relative;
      z-index:1;
      font-family:"Playfair Display",serif;
      font-size:24px;
      line-height:1.15;
      margin-bottom:8px;
      color:#f9fafb;
    }
    .wheel-subcopy{
      position:relative;
      z-index:1;
      color:#d1d5db;
      font-size:13px;
      line-height:1.55;
      margin-bottom:12px;
      max-width:44ch;
    }
    .wheel-legend{
      position:relative;
      z-index:1;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:8px;
    }
    .legend-pill{
      font-size:10px;
      letter-spacing:0.16em;
      text-transform:uppercase;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.28);
      background:rgba(2,6,23,0.30);
      color:var(--text-muted);
      display:inline-flex;
      align-items:center;
      gap:8px;
      user-select:none;
    }
    .legend-dot{
      width:8px;height:8px;border-radius:999px;
      background:rgba(148,163,184,0.35);
      box-shadow:0 0 0 4px rgba(148,163,184,0.08);
    }
    .legend-pill.free .legend-dot{
      background:rgba(244,193,93,0.85);
      box-shadow:0 0 0 4px rgba(244,193,93,0.10);
    }
    .legend-pill.pro .legend-dot{
      background:rgba(147,197,253,0.90);
      box-shadow:0 0 0 4px rgba(147,197,253,0.10);
    }

    .wheel-right{
      border-radius:var(--radius-lg);
      border:1px solid rgba(148,163,184,0.26);
      background:rgba(2,6,23,0.34);
      padding:14px;
      position:relative;
      overflow:hidden;
      display:grid;
      grid-template-rows:auto 1fr auto;
      gap:12px;
      touch-action:pan-y;
    }
    .wheel-right::before{
      content:"";
      position:absolute;
      inset:-40%;
      background:radial-gradient(circle at top left, rgba(244,193,93,0.10), transparent 60%);
      pointer-events:none;
      opacity:0.75;
    }
    .wheel-topbar{
      position:relative;
      z-index:1;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .wheel-controls{
      display:flex;
      gap:8px;
      align-items:center;
    }
    .wheel-btn{
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.30);
      background:rgba(2,6,23,0.40);
      color:var(--text-main);
      padding:8px 12px;
      font-size:12px;
      letter-spacing:0.12em;
      text-transform:uppercase;
      cursor:pointer;
      transition:0.18s ease;
      display:inline-flex;
      align-items:center;
      gap:8px;
      user-select:none;
    }
    .wheel-btn:hover{transform:translateY(-1px);border-color:rgba(244,193,93,0.35)}
    .wheel-btn:active{transform:translateY(0)}

    .wheel-dial{
      position:relative;
      z-index:1;
      width:62px;height:62px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.26);
      background:
        radial-gradient(circle at center, rgba(2,6,23,0.75) 0%, rgba(2,6,23,0.35) 60%, rgba(2,6,23,0.15) 100%),
        conic-gradient(
          from var(--wheel-angle, 0deg),
          rgba(244,193,93,0.82) 0 18deg,
          rgba(148,163,184,0.10) 18deg 45deg,
          rgba(147,197,253,0.86) 45deg 63deg,
          rgba(148,163,184,0.10) 63deg 360deg
        );
      box-shadow:0 16px 40px rgba(0,0,0,0.35);
      overflow:hidden;
      flex:0 0 auto;
      transition:transform 0.25s ease;
      will-change:transform;
    }
    .wheel-dial::after{
      content:"";
      position:absolute;
      inset:10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.20);
      background:rgba(2,6,23,0.55);
      box-shadow: inset 0 0 0 1px rgba(244,193,93,0.06);
    }
    .wheel-dial::before{
      content:"";
      position:absolute;
      left:50%;
      top:50%;
      width:10px;height:10px;
      transform:translate(-50%,-50%);
      border-radius:999px;
      background:rgba(244,193,93,0.92);
      box-shadow:0 0 0 5px rgba(244,193,93,0.10);
      z-index:2;
      opacity:0.55;
    }

    .wheel-card{
      position:relative;
      z-index:1;
      border-radius:18px;
      border:1px solid rgba(148,163,184,0.22);
      background:rgba(15,23,42,0.60);
      padding:16px 16px 14px;
      overflow:hidden;
      min-height:220px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap:10px;
      user-select:none;
    }
    .wheel-card::before{
      content:"";
      position:absolute;
      inset:-45%;
      background:radial-gradient(circle at top right, rgba(244,193,93,0.14), transparent 55%);
      pointer-events:none;
      opacity:0.70;
    }
    .wheel-card.pro::before{
      background:radial-gradient(circle at top right, rgba(147,197,253,0.16), transparent 55%);
      opacity:0.70;
    }
    .wheel-card-top{
      position:relative;
      z-index:1;
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:6px;
    }
    .wheel-tag{
      font-size:10px;
      letter-spacing:0.18em;
      text-transform:uppercase;
      color:var(--text-muted);
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .wheel-tag .kdot{
      width:8px;height:8px;border-radius:999px;
      background:rgba(244,193,93,0.90);
      box-shadow:0 0 0 4px rgba(244,193,93,0.10);
    }
    .wheel-card.pro .wheel-tag .kdot{
      background:rgba(147,197,253,0.90);
      box-shadow:0 0 0 4px rgba(147,197,253,0.10);
    }
    .wheel-step{
      font-size:10px;
      letter-spacing:0.18em;
      text-transform:uppercase;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.28);
      background:rgba(2,6,23,0.35);
      color:var(--text-muted);
      white-space:nowrap;
    }
    .wheel-title{
      position:relative;
      z-index:1;
      font-size:18px;
      font-weight:800;
      line-height:1.15;
      color:#e5e7eb;
      margin-bottom:8px;
    }
    .wheel-desc{
      position:relative;
      z-index:1;
      font-size:13px;
      color:#d1d5db;
      line-height:1.6;
      max-width:68ch;
    }
    .wheel-bullets{
      position:relative;
      z-index:1;
      margin-top:10px;
      padding-left:16px;
      color:#e5e7eb;
      font-size:12px;
    }
    .wheel-bullets li{margin:0 0 6px}
    .wheel-footer{
      position:relative;
      z-index:1;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .wheel-dots{
      display:flex;
      gap:6px;
      flex-wrap:wrap;
      align-items:center;
    }
    .wheel-dot{
      width:8px;height:8px;border-radius:999px;
      border:1px solid rgba(148,163,184,0.35);
      background:rgba(2,6,23,0.40);
      cursor:pointer;
      transition:0.18s ease;
    }
    .wheel-dot:hover{transform:translateY(-1px);border-color:rgba(244,193,93,0.40)}
    .wheel-dot.active{
      background:rgba(244,193,93,0.85);
      border-color:rgba(244,193,93,0.65);
      box-shadow:0 0 0 4px rgba(244,193,93,0.10);
    }
    .wheel-dot.active.pro{
      background:rgba(147,197,253,0.90);
      border-color:rgba(147,197,253,0.70);
      box-shadow:0 0 0 4px rgba(147,197,253,0.10);
    }
    .wheel-cta{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }

    /* Watchlist */
    .watchlist-row{
      display:flex;gap:10px;flex-wrap:wrap;align-items:center;
      position:sticky;
      top:96px;
      z-index:2;
      padding:10px 0 12px;
      background:linear-gradient(to bottom, rgba(15,23,42,0.92),rgba(15,23,42,0.00));
      backdrop-filter:blur(6px);
    }
    @media (max-width:830px){
      .watchlist-row{top:132px}
    }
    .watch-btn{
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.30);
      background:rgba(2,6,23,0.40);
      color:var(--text-main);
      padding:8px 12px;
      font-size:12px;
      letter-spacing:0.12em;
      text-transform:uppercase;
      cursor:pointer;
      transition:0.18s ease;
    }
    .watch-btn:hover{transform:translateY(-1px);border-color:rgba(244,193,93,0.35)}
    .watch-btn.active{background:rgba(244,193,93,0.14);border-color:rgba(244,193,93,0.55);color:var(--accent)}

    .watch-float{
      position:sticky;
      top:140px;
      z-index:1;
      border-radius:18px;
      overflow:hidden;
      transform:translateY(0);
      transition:transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;
      border:1px solid rgba(148,163,184,0.22);
      background:rgba(2,6,23,0.24);
      padding:10px;
    }
    @media (max-width:830px){
      .watch-float{top:186px}
    }
    .watch-float.floating{
      transform:translateY(-6px);
      box-shadow:0 18px 55px rgba(0,0,0,0.35);
      border-color:rgba(244,193,93,0.35);
    }

    .watch-fallback{
      margin-top:10px;
      font-size:11px;
      color:var(--text-muted);
      display:none;
    }
    .watch-fallback a{color:var(--accent);text-decoration:underline}

    /* FAQ */
    .faq{position:relative;z-index:1;display:flex;flex-direction:column;gap:10px}
    details.faq-item{
      border-radius:var(--radius-lg);
      border:1px solid rgba(148,163,184,0.26);
      background:rgba(2,6,23,0.34);
      padding:12px 14px;
      overflow:hidden;
    }
    details.faq-item summary{
      cursor:pointer;
      list-style:none;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      font-weight:700;
      color:#e5e7eb;
      font-size:13px;
    }
    details.faq-item summary::-webkit-details-marker{display:none}
    .faq-ans{margin-top:10px;color:var(--text-muted);font-size:12px;line-height:1.5}
    .chev{color:var(--text-muted);transition:0.18s ease;font-size:16px}
    details[open] .chev{transform:rotate(180deg);color:var(--accent)}

    footer{
      margin-top:28px;
      font-size:11px;
      color:var(--text-muted);
      text-align:center;
      opacity:0.9;
    }
    footer a{color:var(--accent)}
    footer a:hover{text-decoration:underline}

    /* Modals */
    .modal-backdrop{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.6);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:99999;
      padding:14px;
    }
    .modal-backdrop.active{display:flex}
    .modal-window{
      background:rgba(15, 23, 42, 0.97);
      border-radius:24px;
      border:1px solid rgba(148, 163, 184, 0.35);
      box-shadow:0 18px 45px rgba(15, 23, 42, 0.8);
      max-width:460px;
      width:100%;
      padding:22px 22px 18px;
      position:relative;
    }
    .modal-close{
      position:absolute;
      top:10px;
      right:12px;
      border:none;
      background:transparent;
      color:#9ca3af;
      font-size:20px;
      cursor:pointer;
    }
    .modal-kicker{font-size:11px;text-transform:uppercase;letter-spacing:0.18em;color:#9ca3af;margin-bottom:4px}
    .modal-title{font-family:"Playfair Display",serif;font-size:22px;margin-bottom:6px;color:#f9fafb}
    .modal-subtitle{font-size:13px;color:#d1d5db;margin-bottom:12px}
    .modal-list{font-size:12px;color:#e5e7eb;margin:0 0 12px 16px}
    .modal-list li{margin-bottom:6px}
    .modal-btn-row{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
    .modal-primary-btn,.modal-secondary-btn{
      border-radius:999px;
      font-size:12px;
      padding:10px 16px;
      text-transform:uppercase;
      letter-spacing:0.12em;
      cursor:pointer;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      transition:0.2s ease;
    }
    .modal-primary-btn{border:none;background:#f4c15d;color:#000;font-weight:800}
    .modal-primary-btn:hover{background:#f7d680}
    .modal-secondary-btn{border:1px solid rgba(148,163,184,0.5);background:transparent;color:#9ca3af}
    .modal-secondary-btn:hover{border-color:#f4c15d;color:#f4c15d}

    /* Subscribe modal form */
    .subscribe-form{display:flex;flex-direction:column;gap:10px;margin-top:10px}
    .subscribe-input{
      width:100%;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid rgba(148,163,184,0.40);
      background:#020617;
      color:#f9fafb;
      font-size:13px;
      outline:none;
    }
    .subscribe-input:focus{border-color:rgba(244,193,93,0.6);box-shadow:0 0 0 4px rgba(244,193,93,0.10)}
    .hp-field{position:absolute;left:-5000px}
    .subscribe-fineprint{margin-top:10px;font-size:11px;color:var(--text-muted)}

    /* Sticky left rail (desktop only) */
    .rail{
      position:fixed;
      top:124px;
      left:max(12px, calc(50% - (var(--max-width) / 2) - 96px));
      width:78px;
      z-index:9000;
      opacity:0;
      transform:translateY(8px);
      pointer-events:none;
      transition:opacity 0.25s ease, transform 0.25s ease;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .rail.visible{opacity:1;transform:translateY(0);pointer-events:auto}
    @media (max-width:1100px){.rail{display:none !important}}
    .rail-card{
      border-radius:18px;
      border:1px solid rgba(148,163,184,0.22);
      background:rgba(2,6,23,0.50);
      backdrop-filter:blur(6px);
      padding:10px 10px 10px;
      box-shadow:0 12px 28px rgba(0,0,0,0.25);
    }
    .rail-title{
      font-size:10px;
      letter-spacing:0.18em;
      text-transform:uppercase;
      color:var(--text-muted);
      margin-bottom:8px;
    }
    .rail-links{display:flex;flex-direction:column;gap:6px}
    .rail-link{
      font-size:10px;
      letter-spacing:0.18em;
      text-transform:uppercase;
      color:var(--text-muted);
      padding:6px 8px;
      border-radius:12px;
      border:1px solid transparent;
      transition:0.18s ease;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
    }
    .rail-link:hover{color:#e5e7eb;border-color:rgba(148,163,184,0.22);background:rgba(2,6,23,0.35)}
    .rail-link.active{
      color:var(--accent);
      border-color:rgba(244,193,93,0.38);
      background:rgba(244,193,93,0.08);
    }
    .rail-dot{
      width:6px;height:6px;border-radius:999px;
      background:rgba(148,163,184,0.35);
      flex:0 0 auto;
    }
    .rail-link.active .rail-dot{background:rgba(244,193,93,0.95);box-shadow:0 0 0 4px rgba(244,193,93,0.12)}
    .rail-regime{
      display:flex;align-items:center;justify-content:space-between;gap:8px;
      padding:8px 10px;border-radius:14px;
      border:1px solid rgba(148,163,184,0.20);
      background:rgba(2,6,23,0.35);
    }
    .rail-regime small{
      font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:var(--text-muted)
    }
    .rail-regime strong{
      font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:#e5e7eb
    }
    .rail-progress{
      height:84px;
      border-radius:18px;
      border:1px solid rgba(148,163,184,0.22);
      background:rgba(2,6,23,0.50);
      overflow:hidden;
      position:relative;
    }
    .rail-progress-fill{
      position:absolute;
      left:0;right:0;bottom:0;
      height:0%;
      background:linear-gradient(to top, rgba(244,193,93,0.85), rgba(244,193,93,0.12));
      transition:height 0.08s linear;
    }

    /* Safety overrides */
    .brand-subtitle,.hero-kicker,.panel-title,.panel-subtitle,
    .snap-label,.snap-chip,.card-tag,.card-date,.card-desc,
    .faq-ans,footer,.header-link,.wheel-kicker,.wheel-step,.wheel-tag,.wheel-subcopy,.hero-right-title{
      color:var(--text-muted) !important;
    }
    body,p,span,li,label,small,strong,em,i,b,h1,h2,h3,h4,h5,h6,button,input,textarea,select,summary,details,div,section,article,header,footer,nav{color:inherit}

    /* Auth chip */
    .user-chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.28);
      background:rgba(2,6,23,0.35);
      color:var(--text-muted);
      max-width:260px;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .user-chip .uc-dot{
      width:7px;height:7px;border-radius:999px;
      background:rgba(148,163,184,0.45);
      box-shadow:0 0 0 4px rgba(148,163,184,0.10);
      flex:0 0 auto;
    }
    .user-chip.premium .uc-dot{
      background:rgba(147,197,253,0.95);
      box-shadow:0 0 0 4px rgba(147,197,253,0.12);
    }
  </style>
</head>

<body>
  <!-- Visible Bubble -->
  <a class="archive-bubble" href="archive.html" aria-label="Open Free Articles">
    <span class="dot"></span> Free Articles
  </a>

  <!-- Sticky Left Rail (desktop) -->
  <aside class="rail" id="rail" aria-label="Page navigation rail">
    <div class="rail-card">
      <div class="rail-title">Navigate</div>
      <div class="rail-links">
        <a class="rail-link" href="#how" data-rail="how"><span>How</span><span class="rail-dot"></span></a>
        <a class="rail-link" href="#free" data-rail="free"><span>Free</span><span class="rail-dot"></span></a>
        <a class="rail-link" href="#what" data-rail="what"><span>Get</span><span class="rail-dot"></span></a>
        <a class="rail-link" href="#watch" data-rail="watch"><span>Watch</span><span class="rail-dot"></span></a>
        <a class="rail-link" href="#about" data-rail="about"><span>About</span><span class="rail-dot"></span></a>
        <a class="rail-link" href="#premium" data-rail="premium"><span>Pro</span><span class="rail-dot"></span></a>
        <a class="rail-link" href="#faq" data-rail="faq"><span>FAQ</span><span class="rail-dot"></span></a>
        <a class="rail-link" href="#subscribe" data-rail="subscribe"><span>Sub</span><span class="rail-dot"></span></a>
      </div>
    </div>

    <div class="rail-regime" title="Manual label for now (easy to wire to live data later).">
      <small>Risk</small>
      <strong id="rail-regime">Neutral</strong>
    </div>

    <div class="rail-progress" aria-hidden="true">
      <div class="rail-progress-fill" id="rail-progress"></div>
    </div>
  </aside>

  <div class="page">
    <header class="top-header">
      <div class="ticker-row">
        <div class="tradingview-widget-container">
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
{
  "symbols": [
    { "proName": "FOREXCOM:SPXUSD", "title": "S&P 500" },
    { "proName": "NASDAQ:NDX", "title": "Nasdaq 100" },
    { "proName": "DJI", "title": "Dow 30" },
    { "proName": "RUSSELL:RTY", "title": "Russell 2000" },
    { "proName": "OANDA:EURUSD", "title": "EURUSD" },
    { "proName": "COINBASE:BTCUSD", "title": "BTCUSD" },
    { "proName": "OANDA:WTICOUSD", "title": "WTI Crude" },
    { "proName": "OANDA:XAUUSD", "title": "Gold" }
  ],
  "colorTheme": "dark",
  "isTransparent": true,
  "displayMode": "adaptive",
  "locale": "en"
}
          </script>
        </div>
      </div>

      <div class="header-main">
        <div class="header-left">
          <img src="assets/img/FTN-logo.png" alt="FinTrend News logo" class="logo-img">
        </div>

        <div class="header-center">
          <h1 class="brand-title">FinTrend News</h1>
          <div class="brand-subtitle">4x weekly market briefings</div>
        </div>

        <div class="header-right">
          <a href="archive.html" class="header-link">Free Articles</a>

          <!-- Auth -->
          <a href="#" class="header-link" id="open-auth-modal">Sign In</a>
          <a href="#" class="header-link" id="signout-link" style="display:none;">Sign Out</a>

          <!-- Status chip -->
          <span class="header-link user-chip" id="user-chip" style="display:none;">
            <span class="uc-dot" aria-hidden="true"></span>
            <span id="user-chip-text">Signed in</span>
          </span>

          <a href="#" class="subscribe-btn" id="open-subscribe-modal">Get Free Email</a>

          <!-- Premium is gated -->
          <a href="#" class="header-link" id="nav-premium">Premium</a>

          <div class="social-icons">
            <a href="https://www.instagram.com/fintrendnews?igsh=MXZkdXlhbW02bmUwMA==" target="_blank" rel="noopener" class="social-icon" title="FinTrend News Instagram">IG</a>
            <a href="https://linkedin.com" target="_blank" rel="noopener" class="social-icon" title="FinTrend News LinkedIn">in</a>
          </div>
        </div>
      </div>
    </header>

    <!-- HERO -->
    <section class="hero" id="top">
      <div class="hero-card reveal in-view" id="hero-card">
        <div class="hero-inner">
          <div>
            <div class="hero-kicker">Market Newsletter</div>
            <h2 class="hero-title">A <span>desk-style market brief</span> built for fast decisions.</h2>
            <p class="hero-sub">
              Four short notes per week that prioritize the things that move price: rates, FX, commodities, positioning, and catalysts.
              No headline dumping.
            </p>

            <div class="hero-highlights">
              <div class="hero-h">
                <strong>Driver → implication</strong>
                <span>What’s leading today (rates / USD / oil / credit) and what it usually means for risk.</span>
              </div>
              <div class="hero-h">
                <strong>Rotation & crowding</strong>
                <span>What’s outperforming, what’s breaking down, and where the move looks stretched.</span>
              </div>
              <div class="hero-h">
                <strong>Catalysts as scenarios</strong>
                <span>CPI/FOMC/earnings framed as “priced-in vs surprise” with clean watch points.</span>
              </div>
            </div>

            <div class="chips-row" aria-label="Publishing schedule">
              <span class="chip"><span class="c-dot"></span>Mon</span>
              <span class="chip"><span class="c-dot"></span>Wed</span>
              <span class="chip"><span class="c-dot"></span>Fri</span>
              <span class="chip"><span class="c-dot"></span>Sun</span>
              <span class="chip" style="border-color:rgba(147,197,253,0.35);">
                <span class="c-dot" style="background:rgba(147,197,253,0.9);box-shadow:0 0 0 4px rgba(147,197,253,0.10)"></span>
                Premium Tools
              </span>
            </div>

            <div class="hero-actions">
              <a class="btn primary" href="archive.html">Read Free Articles</a>
              <a class="btn" href="#" id="open-subscribe-modal-2">Get Free Email</a>
              <a class="btn" href="#" id="hero-premium-cta">Open Deep Dive (Premium)</a>
              <a class="btn" href="#watch">Live Watchlist</a>
            </div>

            <div class="hero-note">Not investment advice — this is a decision aid: context, levels, and scenarios.</div>
          </div>

          <div class="hero-right-stack">
            <aside class="hero-right">
              <div class="hero-right-title">Today at a glance</div>
              <div class="snapshot-grid" id="snapshot-grid">
                <div class="snap" data-flash>
                  <div class="snap-top"><div class="snap-label">S&P 500</div><div class="snap-chip">Benchmark</div></div>
                  <div class="snap-body">
                    <div class="tradingview-widget-container">
                      <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
{"symbol":"FOREXCOM:SPXUSD","width":"100%","colorTheme":"dark","isTransparent":true,"locale":"en"}
                      </script>
                    </div>
                  </div>
                </div>

                <div class="snap" data-flash>
                  <div class="snap-top"><div class="snap-label">Nasdaq 100</div><div class="snap-chip">Growth</div></div>
                  <div class="snap-body">
                    <div class="tradingview-widget-container">
                      <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
{"symbol":"NASDAQ:NDX","width":"100%","colorTheme":"dark","isTransparent":true,"locale":"en"}
                      </script>
                    </div>
                  </div>
                </div>

                <div class="snap" data-flash>
                  <div class="snap-top"><div class="snap-label">EURUSD</div><div class="snap-chip">FX</div></div>
                  <div class="snap-body">
                    <div class="tradingview-widget-container">
                      <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
{"symbol":"OANDA:EURUSD","width":"100%","colorTheme":"dark","isTransparent":true,"locale":"en"}
                      </script>
                    </div>
                  </div>
                </div>

                <div class="snap" data-flash>
                  <div class="snap-top"><div class="snap-label">BTCUSD</div><div class="snap-chip">Crypto</div></div>
                  <div class="snap-body">
                    <div class="tradingview-widget-container">
                      <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
{"symbol":"COINBASE:BTCUSD","width":"100%","colorTheme":"dark","isTransparent":true,"locale":"en"}
                      </script>
                    </div>
                  </div>
                </div>
              </div>

              <div class="hero-note">Live quotes via TradingView widgets.</div>
            </aside>

            <div class="hero-right-premium">
              <div class="hero-right-title">Premium</div>
              <h3>Deep dives + reusable tools</h3>
              <p>
                Premium unlocks the members dashboard (premium.html): playbooks, idea cards, model portfolios, templates, and the quant lab.
              </p>
              <ul>
                <li><strong>Playbook:</strong> one deep-dive theme per week.</li>
                <li><strong>Tools:</strong> trackers/checklists you can reuse.</li>
                <li><strong>Quant:</strong> optimizer + Monte Carlo sandbox.</li>
              </ul>
              <div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:10px; position:relative; z-index:1;">
                <a class="mini-link" href="#" id="premium-card-cta">View premium</a>
                <a class="mini-link secondary" href="archive.html">Read free</a>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- HOW -->
    <section class="panel reveal" id="how" aria-label="How to use FinTrend News">
      <div class="panel-header">
        <div>
          <div class="panel-title">How to use this</div>
          <div class="panel-subtitle">A workflow that keeps you objective.</div>
        </div>
        <div class="time-indicator">30 seconds</div>
      </div>

      <div class="tiles-grid">
        <div class="tile reveal">
          <div class="tile-top"><div class="tile-num">Step 01</div><div class="tile-pill">Context</div></div>
          <div class="tile-title">Start with the driver</div>
          <div class="tile-line">Ask: “What is leading today?” (rates / USD / oil / credit). Don’t start with headlines.</div>
        </div>
        <div class="tile reveal">
          <div class="tile-top"><div class="tile-num">Step 02</div><div class="tile-pill">Filter</div></div>
          <div class="tile-title">Pick the sections you need</div>
          <div class="tile-line">If you’re trading: levels + catalysts. If investing: regime + leadership.</div>
        </div>
        <div class="tile reveal">
          <div class="tile-top"><div class="tile-num">Step 03</div><div class="tile-pill">Write</div></div>
          <div class="tile-title">Turn it into 3 lines</div>
          <div class="tile-line">Bias, key level, next catalyst. That’s the plan.</div>
        </div>
      </div>
    </section>

    <!-- FREE ARTICLES -->
    <section class="panel reveal" id="free" aria-label="Free Articles">
      <div class="panel-header">
        <div>
          <div class="panel-title">Free articles</div>
          <div class="panel-subtitle">The easiest way to browse the free content.</div>
        </div>
        <div class="time-indicator">Free</div>
      </div>

      <div class="search-row">
        <input id="freeSearch" type="text" placeholder="Search (example: CPI, earnings, USD, oil…)" />
        <a class="mini-link" href="archive.html">Open free library</a>
        <a class="mini-link secondary" href="archive.html">Browse by date</a>
      </div>

      <div class="two-col">
        <div class="card reveal">
          <div class="card-top"><div class="card-tag">Free</div><div class="card-date">Library</div></div>
          <div class="card-title">Find articles fast</div>
          <div class="card-desc">
            Use the Free Articles page for search + categories. The archive stays the calendar “source of truth.”
          </div>
          <div class="card-actions">
            <a class="mini-link" href="archive.html">Read Free Articles</a>
            <a class="mini-link secondary" href="archive.html">Open Archive</a>
          </div>
        </div>

        <div class="card reveal">
          <div class="card-top"><div class="card-tag">Premium</div><div class="card-date">Deep dives</div></div>
          <div class="card-title">Want the deep dive?</div>
          <div class="card-desc">
            Deep Dive lives on premium.html. If you’re not a member, it’ll prompt you to subscribe — with a button back to free articles.
          </div>
          <div class="card-actions">
            <a class="mini-link" href="#" id="free-panel-premium-cta">Open Deep Dive</a>
            <a class="mini-link secondary" href="#" id="open-subscribe-modal-3">Stay on free email</a>
          </div>
        </div>
      </div>

      <p style="margin-top:12px; position:relative; z-index:1; font-size:11px; color:var(--text-muted);">
        Tip: when we build archive.html, we can auto-generate “Latest 6 free posts” here from Supabase.
      </p>
    </section>

    <!-- WHAT YOU GET (Wheel) -->
    <section class="panel reveal" id="what" aria-label="What you get wheel">
      <div class="panel-header">
        <div>
          <div class="panel-title">What you get</div>
          <div class="panel-subtitle">Free modules first, then premium.</div>
        </div>
        <div class="time-indicator">Wheel</div>
      </div>

      <div class="wheel-wrap">
        <div class="wheel-left">
          <div class="wheel-kicker">Designed like a product</div>
          <div class="wheel-headline">Clear modules, clear purpose.</div>
          <div class="wheel-subcopy">
            Each slice explains what it is and what decision it supports.
            Free first, premium last.
          </div>
          <div class="wheel-legend">
            <div class="legend-pill free"><span class="legend-dot"></span><span>Free</span></div>
            <div class="legend-pill pro"><span class="legend-dot"></span><span>Premium</span></div>
          </div>
        </div>

        <div class="wheel-right" id="wheel-swipe">
          <div class="wheel-topbar">
            <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
              <div class="wheel-dial" id="wheel-dial" aria-hidden="true"></div>
              <div>
                <div class="wheel-kicker" style="margin:0 0 4px;">Current slice</div>
                <div id="wheel-label" style="font-size:12px;color:#e5e7eb;letter-spacing:0.14em;text-transform:uppercase;">Free • Macro Drivers</div>
              </div>
            </div>

            <div class="wheel-controls">
              <button class="wheel-btn" id="wheel-prev" type="button">← Prev</button>
              <button class="wheel-btn" id="wheel-next" type="button">Next →</button>
            </div>
          </div>

          <div class="wheel-card" id="wheel-card" aria-live="polite"></div>

          <div class="wheel-footer">
            <div class="wheel-dots" id="wheel-dots" aria-label="Wheel dots"></div>
            <div class="wheel-cta">
              <a class="mini-link secondary" href="archive.html">Free articles</a>
              <a class="mini-link" href="#" id="wheel-subscribe-cta">Get free email</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- WATCHLIST -->
    <section class="panel reveal" id="watch" aria-label="Watchlist">
      <div class="panel-header">
        <div>
          <div class="panel-title">Live watchlist</div>
          <div class="panel-subtitle">Tap a market → chart loads.</div>
        </div>
        <div class="time-indicator">Interactive</div>
      </div>

      <div class="watchlist-row">
        <button class="watch-btn active" data-symbol="FOREXCOM:SPXUSD">SPX</button>
        <button class="watch-btn" data-symbol="NASDAQ:NDX">NDX</button>
        <button class="watch-btn" data-symbol="OANDA:EURUSD">EURUSD</button>
        <button class="watch-btn" data-symbol="COINBASE:BTCUSD">BTC</button>
        <button class="watch-btn" data-symbol="OANDA:XAUUSD">GOLD</button>
      </div>

      <div class="watch-float" id="watch-float">
        <div class="tradingview-widget-container" id="watch-widget"></div>
        <div class="watch-fallback" id="watch-fallback">
          Chart didn’t load. <a id="watch-open-tv" href="#" rel="noopener">Open this symbol on TradingView ↗</a>
        </div>
      </div>

      <div style="position:relative;z-index:1;margin-top:14px;display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px;">
        <div class="card reveal" style="min-height:auto">
          <div class="card-top"><div class="card-tag">Tip</div><div class="card-date">Fast</div></div>
          <div class="card-title" style="font-size:14px">Pick one “anchor” chart</div>
          <div class="card-desc">Use SPX/NDX/BTC as your anchor. Use everything else as confirmation or disagreement.</div>
        </div>
        <div class="card reveal" style="min-height:auto">
          <div class="card-top"><div class="card-tag">Tip</div><div class="card-date">Macro</div></div>
          <div class="card-title" style="font-size:14px">Check EURUSD for tone</div>
          <div class="card-desc">FX can signal the shift before the narrative catches up.</div>
        </div>
        <div class="card reveal" style="min-height:auto">
          <div class="card-top"><div class="card-tag">Tip</div><div class="card-date">Risk</div></div>
          <div class="card-title" style="font-size:14px">Gold is a stress read</div>
          <div class="card-desc">If gold rises while equities grind, treat it as “risk hedging is being bought.”</div>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section class="panel reveal" id="about" aria-label="About">
      <div class="panel-header">
        <div>
          <div class="panel-title">About FinTrend</div>
          <div class="panel-subtitle">What it is (and what it isn’t).</div>
        </div>
        <div class="time-indicator">Context</div>
      </div>

      <div class="two-col">
        <div class="card reveal">
          <div class="card-top"><div class="card-tag">Purpose</div><div class="card-date">Clarity</div></div>
          <div class="card-title">A briefing you can act on</div>
          <div class="card-desc">
            Built to answer: what’s driving price, what confirms it, and what would change the setup.
            The goal is speed and structure — not predictions.
          </div>
          <div class="card-actions">
            <a class="mini-link secondary" href="archive.html">Read free</a>
            <a class="mini-link secondary" href="#what">What you get</a>
          </div>
        </div>

        <div class="card reveal">
          <div class="card-top"><div class="card-tag">Method</div><div class="card-date">Repeatable</div></div>
          <div class="card-title">What goes into each note</div>
          <div class="card-desc">
            (1) Driver check (rates/USD/oil/credit). (2) Leadership + rotation. (3) Catalyst scenarios.
            (4) Levels that make the “if/then” actionable.
          </div>
          <div class="card-actions">
            <a class="mini-link" href="#" id="open-subscribe-modal-4">Get free email</a>
            <a class="mini-link secondary" href="#premium">Premium tools</a>
          </div>
        </div>
      </div>

      <div class="tiles-grid" style="margin-top:12px">
        <div class="tile reveal">
          <div class="tile-top"><div class="tile-num">01</div><div class="tile-pill">Writing</div></div>
          <div class="tile-title">Short, specific sentences</div>
          <div class="tile-line">No filler. If a line is here, it should change a decision.</div>
        </div>
        <div class="tile reveal">
          <div class="tile-top"><div class="tile-num">02</div><div class="tile-pill">Structure</div></div>
          <div class="tile-title">Same framework every time</div>
          <div class="tile-line">Driver → confirmation → catalyst → levels.</div>
        </div>
        <div class="tile reveal">
          <div class="tile-top"><div class="tile-num">03</div><div class="tile-pill">Design</div></div>
          <div class="tile-title">Readable and calm</div>
          <div class="tile-line">One accent color, high contrast, no visual noise.</div>
        </div>
      </div>
    </section>

    <!-- PREMIUM -->
    <section class="panel reveal" id="premium" aria-label="Premium tools">
      <div class="panel-header">
        <div>
          <div class="panel-title">Premium tools</div>
          <div class="panel-subtitle">Members-only dashboard (premium.html).</div>
        </div>
        <div class="time-indicator">Members</div>
      </div>

      <div class="two-col">
        <div class="card reveal">
          <div class="card-top"><div class="card-tag">Premium</div><div class="card-date">Dashboard</div></div>
          <div class="card-title">Open the member dashboard</div>
          <div class="card-desc">
            If your account is marked premium, this opens premium.html: your modular dashboard (playbook, templates, ideas, models, roundups, quant lab).
          </div>
          <div class="card-actions">
            <a class="mini-link" href="#" id="open-premium-dashboard">Open Dashboard ↗</a>
            <a class="mini-link secondary" href="#" id="manage-membership">Manage</a>
            <a class="mini-link secondary" href="archive.html">Free articles</a>
          </div>
          <p id="premium-status" style="margin-top:10px;font-size:11px;color:var(--text-muted);">Sign in to check access.</p>
        </div>

        <div class="card reveal">
          <div class="card-top"><div class="card-tag">What you pay for</div><div class="card-date">$2.50/mo</div></div>
          <div class="card-title">Tools + structured content</div>
          <div class="card-desc">
            Premium is a place to ship tools and structured modules subscribers can reuse:
            templates, model allocations, curated idea cards, and the quant sandbox.
          </div>
          <div class="card-actions">
            <a class="mini-link" href="#" id="premium-panel-cta">View premium</a>
            <a class="mini-link secondary" href="#" id="open-subscribe-modal-5">Stay on free email</a>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section class="panel reveal" id="faq" aria-label="FAQ">
      <div class="panel-header">
        <div>
          <div class="panel-title">Quick answers</div>
          <div class="panel-subtitle">Click to expand.</div>
        </div>
        <div class="time-indicator">FAQ</div>
      </div>

      <div class="faq">
        <details class="faq-item">
          <summary>What do I get each week? <span class="chev">▾</span></summary>
          <div class="faq-ans">Four notes per week: Monday outlook, Wednesday momentum, Friday recap, Sunday macro.</div>
        </details>

        <details class="faq-item">
          <summary>Is this financial advice? <span class="chev">▾</span></summary>
          <div class="faq-ans">No. It’s informational and educational — context and frameworks, not buy/sell instructions.</div>
        </details>

        <details class="faq-item">
          <summary>Where are the free articles? <span class="chev">▾</span></summary>
          <div class="faq-ans">Use the Free Articles page for search and browsing, or the Archive for date-based browsing.</div>
        </details>

        <details class="faq-item">
          <summary>What does Premium unlock? <span class="chev">▾</span></summary>
          <div class="faq-ans">Access to premium.html (dashboard) and the modules you publish there: templates, playbooks, idea cards, models, and quant tools.</div>
        </details>
      </div>
    </section>

    <!-- SUBSCRIBE -->
    <section class="panel reveal" id="subscribe" aria-label="Subscribe CTA">
      <div class="panel-header">
        <div>
          <div class="panel-title">Get the free email</div>
          <div class="panel-subtitle">Short notes you can actually use.</div>
        </div>
        <div class="time-indicator">Free</div>
      </div>

      <div class="two-col">
        <div class="card reveal">
          <div class="card-top"><div class="card-tag">Subscribe</div><div class="card-date">Mailchimp</div></div>
          <div class="card-title">Simple signup</div>
          <div class="card-desc">The form opens in a popup so the page stays clean.</div>
          <div class="card-actions">
            <a class="mini-link" href="#" id="open-subscribe-modal-6">Open subscribe</a>
            <a class="mini-link secondary" href="archive.html">Read free</a>
          </div>
        </div>

        <div class="card reveal">
          <div class="card-top"><div class="card-tag">Follow</div><div class="card-date">Social</div></div>
          <div class="card-title">Prefer socials?</div>
          <div class="card-desc">Follow for updates and highlights if email isn’t your thing.</div>
          <div class="card-actions">
            <a class="mini-link secondary" href="https://www.instagram.com/fintrendnews?igsh=MXZkdXlhbW02bmUwMA==" target="_blank" rel="noopener">Instagram ↗</a>
            <a class="mini-link secondary" href="https://linkedin.com" target="_blank" rel="noopener">LinkedIn ↗</a>
          </div>
        </div>
      </div>
    </section>

    <footer class="reveal">
      <p style="max-width:740px;margin:0 auto 6px;">
        <strong>Disclaimer:</strong>
        This content is for informational and educational purposes only, not financial advice.
        I am not a licensed financial advisor. Nothing here is a recommendation to buy or sell any financial asset.
      </p>
      <p>© 2026 FinTrend News · <a href="archive.html">Archive</a> · <a href="archive.html">Free Articles</a></p>
    </footer>
  </div>

  <!-- Auth modal -->
  <div id="auth-modal" class="modal-backdrop" aria-hidden="true">
    <div class="modal-window" role="dialog" aria-modal="true" aria-labelledby="auth-modal-title">
      <button class="modal-close" id="close-auth-modal" aria-label="Close">×</button>

      <div class="modal-kicker">FinTrend Account</div>
      <h2 class="modal-title" id="auth-modal-title">Sign in</h2>
      <p class="modal-subtitle" id="auth-subtitle">Sign in to access premium tools and saved watchlists.</p>

      <form id="auth-form" style="display:flex;flex-direction:column;gap:10px;margin-top:10px;">
        <input id="auth-email" type="email" placeholder="Email" required
          style="padding:10px 12px;border-radius:14px;border:1px solid rgba(148,163,184,0.4);background:#020617;color:#f9fafb;font-size:12px;" />
        <input id="auth-password" type="password" placeholder="Password" required
          style="padding:10px 12px;border-radius:14px;border:1px solid rgba(148,163,184,0.4);background:#020617;color:#f9fafb;font-size:12px;" />

        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:6px;">
          <button type="submit" class="modal-primary-btn" id="auth-submit-btn">Sign in</button>
          <button type="button" class="modal-secondary-btn" id="auth-toggle-btn">Create account</button>
        </div>

        <div id="auth-msg" style="margin-top:8px;font-size:12px;color:#e5e7eb;"></div>
      </form>

      <div style="margin-top:12px;border-top:1px solid rgba(148,163,184,0.25);padding-top:12px;">
        <button type="button" class="modal-secondary-btn" id="auth-reset-btn" style="width:100%;">Forgot password</button>
      </div>
    </div>
  </div>

  <!-- Premium modal -->
  <div id="premium-modal" class="modal-backdrop" aria-hidden="true">
    <div class="modal-window" role="dialog" aria-modal="true" aria-labelledby="premium-modal-title">
      <button class="modal-close" id="close-premium-modal" aria-label="Close">×</button>

      <div class="modal-kicker">FinTrend Premium</div>
      <h2 class="modal-title" id="premium-modal-title">Upgrade to Premium</h2>
      <p class="modal-subtitle" id="premium-modal-subtitle">
        Premium unlocks the members dashboard (premium.html) and the tools/modules you publish there.
      </p>

      <ul class="modal-list">
        <li><strong>Members dashboard</strong> (premium.html) with modular sections.</li>
        <li><strong>Templates vault</strong> (trackers/checklists you upload).</li>
        <li><strong>Idea cards + models</strong> you can update over time.</li>
        <li><strong>Quant lab</strong> (optimizer / Monte Carlo) for deeper work.</li>
      </ul>

      <div class="modal-btn-row">
        <a href="#" class="modal-primary-btn" id="go-premium-checkout">Go Premium</a>
        <a href="archive.html" class="modal-secondary-btn" id="go-free-subscribe">Access Free Articles</a>
      </div>
    </div>
  </div>

  <!-- Subscribe modal -->
  <div id="subscribe-modal" class="modal-backdrop" aria-hidden="true">
    <div class="modal-window" role="dialog" aria-modal="true" aria-labelledby="subscribe-modal-title">
      <button class="modal-close" id="close-subscribe-modal" aria-label="Close">×</button>

      <div class="modal-kicker">FinTrend News</div>
      <h2 class="modal-title" id="subscribe-modal-title">Get the free email</h2>
      <p class="modal-subtitle">Short market notes. Unsubscribe anytime.</p>

      <form
        action="https://github.us1.list-manage.com/subscribe/post?u=f93d4125631bb82d0915cc5d5&amp;id=0ad7096e52&amp;f_id=00addae4f0"
        method="post"
        target="_blank"
        novalidate
        class="subscribe-form"
      >
        <input class="subscribe-input" type="email" name="EMAIL" placeholder="you@email.com" required />
        <div class="hp-field" aria-hidden="true">
          <input type="text" name="b_f93d4125631bb82d0915cc5d5_0ad7096e52" tabindex="-1" value="">
        </div>
        <button class="modal-primary-btn" type="submit">Subscribe</button>
        <button class="modal-secondary-btn" type="button" id="subscribe-secondary-close">Not now</button>
      </form>

      <p class="subscribe-fineprint">Powered by Mailchimp.</p>
    </div>
  </div>

  <script>
    (function(){
      "use strict";

      // -----------------------------------------------------
      // Helpers
      // -----------------------------------------------------
      function safeSmoothScrollTo(hash){
        const el = document.querySelector(hash);
        if (!el) return;
        el.scrollIntoView({ behavior:'smooth', block:'start' });
      }

      document.addEventListener("click",(e)=>{
        const a = e.target.closest("a");
        if (!a) return;
        const href = a.getAttribute("href");
        if (!href) return;

        if (href === "#") {
          e.preventDefault();
          return;
        }
        if (href.startsWith("#")) {
          const el = document.querySelector(href);
          if (!el) return;
          e.preventDefault();
          safeSmoothScrollTo(href);
        }
      });

      // -----------------------------------------------------
      // Modals (generic)
      // -----------------------------------------------------
      function openModal(modal){
        if (!modal) return;
        modal.classList.add("active");
        modal.setAttribute("aria-hidden","false");
      }
      function closeModal(modal){
        if (!modal) return;
        modal.classList.remove("active");
        modal.setAttribute("aria-hidden","true");
      }
      function closeAnyOpenModal(){
        document.querySelectorAll(".modal-backdrop.active").forEach(m=>closeModal(m));
      }

      window.addEventListener("keydown",(e)=>{
        if (e.key === "Escape") closeAnyOpenModal();
      });

      document.querySelectorAll(".modal-backdrop").forEach((backdrop)=>{
        backdrop.addEventListener("click",(e)=>{
          if (e.target === backdrop) closeModal(backdrop);
        });
      });

      // -----------------------------------------------------
      // Subscribe modal
      // -----------------------------------------------------
      const subscribeModal = document.getElementById("subscribe-modal");
      const closeSub = document.getElementById("close-subscribe-modal");
      const closeSub2 = document.getElementById("subscribe-secondary-close");

      function openSubscribeModal(e){
        if (e) e.preventDefault();
        openModal(subscribeModal);
      }
      function closeSubscribeModal(){
        closeModal(subscribeModal);
      }

      [
        "open-subscribe-modal",
        "open-subscribe-modal-2",
        "open-subscribe-modal-3",
        "open-subscribe-modal-4",
        "open-subscribe-modal-5",
        "open-subscribe-modal-6"
      ].map(id=>document.getElementById(id)).filter(Boolean)
        .forEach(el=>el.addEventListener("click", openSubscribeModal));

      if (closeSub) closeSub.addEventListener("click", closeSubscribeModal);
      if (closeSub2) closeSub2.addEventListener("click", closeSubscribeModal);

      // -----------------------------------------------------
      // Premium modal
      // -----------------------------------------------------
      const premiumModal    = document.getElementById("premium-modal");
      const closePremiumBtn = document.getElementById("close-premium-modal");

      function openPremiumModal(e){
        if (e) e.preventDefault();
        openModal(premiumModal);
      }
      function closePremiumModal(){
        closeModal(premiumModal);
      }
      if (closePremiumBtn) closePremiumBtn.addEventListener("click", closePremiumModal);

      // Stripe payment link (LIVE)
      const PAYMENT_LINK = "https://buy.stripe.com/aFabJ0auNdEVbnR4m2ffy00";
      const goPremiumCheckout = document.getElementById("go-premium-checkout");
      if (goPremiumCheckout){
        goPremiumCheckout.addEventListener("click",(e)=>{
          e.preventDefault();
          window.open(PAYMENT_LINK, "_blank", "noopener");
        });
      }

      // -----------------------------------------------------
      // Auth modal
      // -----------------------------------------------------
      const authModal = document.getElementById("auth-modal");
      const openAuthBtn = document.getElementById("open-auth-modal");
      const closeAuthBtn = document.getElementById("close-auth-modal");

      function openAuthModal(e){
        if (e) e.preventDefault();
        openModal(authModal);
        const authMsg = document.getElementById("auth-msg");
        if (authMsg) authMsg.textContent = "";
      }
      function closeAuthModal(){
        closeModal(authModal);
        const authMsg = document.getElementById("auth-msg");
        if (authMsg) authMsg.textContent = "";
      }

      if (openAuthBtn) openAuthBtn.addEventListener("click", openAuthModal);
      if (closeAuthBtn) closeAuthBtn.addEventListener("click", closeAuthModal);

      // -----------------------------------------------------
      // What you get: Wheel
      // -----------------------------------------------------
      const wheelData = [
        { tier:"Free", title:"Macro Drivers (Fast Read)", desc:"A short read on what is actually driving risk today: rates, USD, oil, credit, and the narrative tying them together.", bullets:["One primary driver + one supporting driver (not a news dump)","Plain-English implication for equities / FX / crypto","Key dates: CPI, FOMC, jobs, earnings clusters"] },
        { tier:"Free", title:"Momentum & Rotation", desc:"Who is leading, who is lagging, and what that says about positioning and regime (growth vs value, cyclicals vs defensives).", bullets:["Leadership snapshot (what’s outperforming)","Rotation read (what’s being sold to fund what)","Crowding/stretch note (where risk/reward worsens)"] },
        { tier:"Free", title:"Catalysts With Context", desc:"Pre-event framing and post-event takeaways focused on what would change price — not what sounds dramatic.", bullets:["What’s priced in vs what would surprise","2–3 scenarios max (base / upside / downside)","“If X happens, watch Y” logic"] },
        { tier:"Free", title:"Archive-First Notes", desc:"Everything stays organized so your notes don’t disappear in a feed.", bullets:["Browse by date in seconds","Scan by week in the calendar","Builds a track record over time"] },
        { tier:"Premium", title:"Weekly Trade Plan (Levels + Triggers)", desc:"Key levels, what confirms, what invalidates, and what you do if it breaks.", bullets:["Support/resistance + what price action to watch","Trigger → target → invalidation","Best risk/reward areas this week"] },
        { tier:"Premium", title:"Setups Board (2–5 Clean Trades)", desc:"A short list of setups with thesis, entry logic, invalidation, and horizon.", bullets:["2–5 setups per week","Each includes: why it works + what kills it","Horizon + add/reduce rules"] },
        { tier:"Premium", title:"Portfolio Models (Cautious / Balanced / Aggressive)", desc:"Example allocations with simple rebalance rules and regime notes.", bullets:["3 model allocations + rationale","Rebalance triggers (volatility, breadth)","Basic risk controls (sizing + de-risk rules)"] },
        { tier:"Premium", title:"Premium Dashboard (Members Page)", desc:"premium.html: the members-only dashboard with modules and tools you build out over time.", bullets:["Access to premium.html (members-only)","Templates vault + tools you upload","Quant module (optimizer / Monte Carlo)"] }
      ];

      const wheelCard = document.getElementById("wheel-card");
      const wheelDots = document.getElementById("wheel-dots");
      const wheelPrev = document.getElementById("wheel-prev");
      const wheelNext = document.getElementById("wheel-next");
      const wheelDial = document.getElementById("wheel-dial");
      const wheelLabel = document.getElementById("wheel-label");
      const wheelSubscribeCTA = document.getElementById("wheel-subscribe-cta");
      const wheelSwipe = document.getElementById("wheel-swipe");

      let wheelIdx = 0;

      function renderWheelDots(){
        if (!wheelDots) return;
        wheelDots.innerHTML = "";
        wheelData.forEach((item, i)=>{
          const d = document.createElement("button");
          d.type = "button";
          d.className = "wheel-dot";
          d.setAttribute("aria-label", (item.tier === "Premium" ? "Premium" : "Free") + " • " + item.title);
          d.addEventListener("click", ()=>setWheel(i));
          wheelDots.appendChild(d);
        });
      }

      function setWheel(i){
        wheelIdx = (i + wheelData.length) % wheelData.length;
        const item = wheelData[wheelIdx];
        if (!wheelCard) return;

        const isPro = item.tier === "Premium";
        wheelCard.className = "wheel-card" + (isPro ? " pro" : "");
        if (wheelLabel) wheelLabel.textContent = (isPro ? "Premium" : "Free") + " • " + item.title;

        const stepText = (wheelIdx + 1) + " / " + wheelData.length;
        wheelCard.innerHTML = `
          <div>
            <div class="wheel-card-top">
              <div class="wheel-tag"><span class="kdot"></span><span>${isPro ? "Premium" : "Free"}</span></div>
              <div class="wheel-step">${stepText}</div>
            </div>
            <div class="wheel-title">${item.title}</div>
            <div class="wheel-desc">${item.desc}</div>
            <ul class="wheel-bullets">
              ${item.bullets.map(b=>`<li>${b}</li>`).join("")}
            </ul>
          </div>
          <div class="wheel-footer" style="margin-top:6px;">
            <div style="font-size:11px;color:var(--text-muted);letter-spacing:.12em;text-transform:uppercase;">
              ${isPro ? "Included with Premium subscription" : "Included with Free email"}
            </div>
            <div class="wheel-cta">
              ${isPro ? `<a class="mini-link" href="#" id="wheel-open-premium">View premium</a>` : `<a class="mini-link" href="#" id="wheel-open-subscribe">Get free email</a>`}
              <a class="mini-link secondary" href="archive.html">Free articles</a>
            </div>
          </div>
        `;

        if (wheelDots){
          Array.from(wheelDots.children).forEach((node, idx)=>{
            node.classList.toggle("active", idx === wheelIdx);
            node.classList.toggle("pro", idx === wheelIdx && wheelData[wheelIdx].tier === "Premium");
          });
        }

        if (wheelDial){
          const angle = (360 / wheelData.length) * wheelIdx;
          wheelDial.style.setProperty("--wheel-angle", angle + "deg");
          wheelDial.style.transform = "rotate(" + (angle * -1) + "deg)";
        }

        const openSubInline = document.getElementById("wheel-open-subscribe");
        if (openSubInline) openSubInline.addEventListener("click", (e)=>{ e.preventDefault(); openSubscribeModal(e); });

        const openPremInline = document.getElementById("wheel-open-premium");
        if (openPremInline) openPremInline.addEventListener("click", (e)=>{ e.preventDefault(); window.__FTN__?.routePremium?.(e); });
      }

      if (wheelPrev) wheelPrev.addEventListener("click", ()=>setWheel(wheelIdx - 1));
      if (wheelNext) wheelNext.addEventListener("click", ()=>setWheel(wheelIdx + 1));
      if (wheelSubscribeCTA) wheelSubscribeCTA.addEventListener("click", (e)=>{ e.preventDefault(); openSubscribeModal(e); });

      (function initWheelSwipe(){
        if (!wheelSwipe) return;
        let startX = 0, startY = 0, tracking = false;

        wheelSwipe.addEventListener("pointerdown",(e)=>{
          tracking = true;
          startX = e.clientX;
          startY = e.clientY;
        });

        wheelSwipe.addEventListener("pointerup",(e)=>{
          if (!tracking) return;
          tracking = false;
          const dx = e.clientX - startX;
          const dy = e.clientY - startY;
          if (Math.abs(dx) < 40 || Math.abs(dx) < Math.abs(dy)) return;
          if (dx < 0) setWheel(wheelIdx + 1);
          else setWheel(wheelIdx - 1);
        });

        wheelSwipe.addEventListener("pointercancel",()=>{ tracking = false; });
      })();

      renderWheelDots();
      setWheel(0);

      // -----------------------------------------------------
      // TradingView Watchlist (interactive)
      // -----------------------------------------------------
      const watchWrap = document.getElementById("watch-widget");
      const watchFallback = document.getElementById("watch-fallback");
      const watchOpenTV = document.getElementById("watch-open-tv");
      const buttons = document.querySelectorAll(".watch-btn");
      let currentSymbol = "FOREXCOM:SPXUSD";
      let fallbackTimer = null;

      function showFallback(symbol){
        if (!watchFallback || !watchOpenTV) return;
        const tvUrl = "https://www.tradingview.com/chart/?symbol=" + encodeURIComponent(symbol);
        watchOpenTV.setAttribute("href", tvUrl);
        watchOpenTV.setAttribute("target", "_blank");
        watchFallback.style.display = "block";
      }

      function hideFallback(){
        if (!watchFallback) return;
        watchFallback.style.display = "none";
      }

      function loadMiniChart(symbol) {
        try{
          currentSymbol = symbol || "FOREXCOM:SPXUSD";
          if (!watchWrap) return;

          hideFallback();
          if (fallbackTimer) clearTimeout(fallbackTimer);
          fallbackTimer = setTimeout(()=>showFallback(currentSymbol), 2500);

          watchWrap.innerHTML = "";

          const widgetDiv = document.createElement("div");
          widgetDiv.className = "tradingview-widget-container__widget";
          watchWrap.appendChild(widgetDiv);

          const s = document.createElement("script");
          s.type = "text/javascript";
          s.async = true;
          s.src =
            "https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js?cb=" +
            Date.now();

          s.text = JSON.stringify({
            symbol: currentSymbol,
            width: "100%",
            height: 280,
            locale: "en",
            dateRange: "3M",
            colorTheme: "dark",
            isTransparent: true,
            autosize: true
          });

          s.onload = function(){
            if (fallbackTimer) clearTimeout(fallbackTimer);
            fallbackTimer = null;
            setTimeout(()=>{
              const hasContent = watchWrap.querySelector("iframe, canvas, svg, .tv-widget-chart, .tradingview-widget-container__widget *");
              if (hasContent) hideFallback();
              else showFallback(currentSymbol);
            }, 800);
          };

          watchWrap.appendChild(s);
        } catch(_){
          showFallback(symbol);
        }
      }

      buttons.forEach((btn) => {
        btn.addEventListener("click", () => {
          buttons.forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
          loadMiniChart(btn.dataset.symbol || "FOREXCOM:SPXUSD");
        });
      });

      loadMiniChart(currentSymbol);

      // -----------------------------------------------------
      // Floating module behavior
      // -----------------------------------------------------
      const watchPanel = document.getElementById('watch');
      const watchFloat = document.getElementById('watch-float');
      const watchIO = ('IntersectionObserver' in window) ? new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          if (!watchFloat) return;
          if (entry.isIntersecting) watchFloat.classList.add('floating');
          else watchFloat.classList.remove('floating');
        });
      }, { threshold: 0.12 }) : null;
      if (watchIO && watchPanel) watchIO.observe(watchPanel);

      // -----------------------------------------------------
      // Scroll reveal
      // -----------------------------------------------------
      (function initScrollReveal(){
        if (!('IntersectionObserver' in window)) return;
        const els = document.querySelectorAll('.reveal');
        const io = new IntersectionObserver((entries)=>{
          entries.forEach(entry=>{
            if (entry.isIntersecting){
              entry.target.classList.add('in-view');
              io.unobserve(entry.target);
            }
          });
        }, { threshold: 0.12 });

        document.documentElement.classList.add('sr');
        els.forEach(el=>io.observe(el));
      })();

      // -----------------------------------------------------
      // Snapshot micro flash (one-time)
      // -----------------------------------------------------
      document.querySelectorAll('[data-flash]').forEach((n,i)=>{
        setTimeout(()=>n.classList.add('flash'), 120 + i*90);
      });

      // -----------------------------------------------------
      // Sticky Left Rail: section highlight + progress + fade in after hero
      // -----------------------------------------------------
      const rail = document.getElementById('rail');
      const railLinks = Array.from(document.querySelectorAll('.rail-link'));
      const railProgress = document.getElementById('rail-progress');
      const railRegime = document.getElementById('rail-regime');

      const sections = [
        { id:'how', el:document.getElementById('how') },
        { id:'free', el:document.getElementById('free') },
        { id:'what', el:document.getElementById('what') },
        { id:'watch', el:document.getElementById('watch') },
        { id:'about', el:document.getElementById('about') },
        { id:'premium', el:document.getElementById('premium') },
        { id:'faq', el:document.getElementById('faq') },
        { id:'subscribe', el:document.getElementById('subscribe') }
      ].filter(s=>s.el);

      function setActiveRail(id){
        railLinks.forEach(a=>{
          a.classList.toggle('active', a.dataset.rail === id);
        });
      }

      const sectionIO = ('IntersectionObserver' in window) ? new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          if (!entry.isIntersecting) return;
          const id = entry.target.id;
          if (id) setActiveRail(id);
        });
      }, { rootMargin: "-35% 0px -55% 0px", threshold: 0.01 }) : null;

      if (sectionIO){
        sections.forEach(s=>sectionIO.observe(s.el));
      }

      function updateRailProgress(){
        const doc = document.documentElement;
        const max = doc.scrollHeight - window.innerHeight;
        const p = max > 0 ? (window.scrollY / max) : 0;
        if (railProgress) railProgress.style.height = Math.max(0, Math.min(100, p*100)) + "%";
      }

      function updateRailVisibility(){
        if (!rail) return;
        const heroCard = document.getElementById('hero-card');
        if (!heroCard) return;
        const r = heroCard.getBoundingClientRect();
        const show = r.bottom < 160;
        rail.classList.toggle('visible', show);
      }

      window.addEventListener('scroll', ()=>{
        updateRailProgress();
        updateRailVisibility();
      }, { passive:true });
      window.addEventListener('resize', ()=>{
        updateRailProgress();
        updateRailVisibility();
      });

      updateRailProgress();
      updateRailVisibility();

      if (railRegime){
        railRegime.textContent = "Neutral";
      }

      // -----------------------------------------------------
      // Supabase Auth + Premium gating
      // -----------------------------------------------------
      (async function initSupabase(){
        try{
          if (!window.supabase || !window.supabase.createClient) {
            console.warn("[auth] Supabase library missing (cdn load failed).");
            return;
          }

          const SUPABASE_URL = "https://dxmdyperxyydqdshazcp.supabase.co".trim();
          const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR4bWR5cGVyeHl5ZHFkc2hhemNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NjMyNDQsImV4cCI6MjA4NDUzOTI0NH0.nMKF2wi8FWX0eYrDzSyJE_CPl8XgSMx27fPlcZ9gVzI".trim();

          const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {
            auth: {
              persistSession: true,
              autoRefreshToken: true,
              detectSessionInUrl: true,
              storage: window.localStorage
            }
          });

          window.__FTN__ = window.__FTN__ || {};
          window.__FTN__.supabase = supabaseClient;

          // UI refs
          const authForm = document.getElementById("auth-form");
          const authEmail = document.getElementById("auth-email");
          const authPassword = document.getElementById("auth-password");
          const authMsg = document.getElementById("auth-msg");

          const authTitle = document.getElementById("auth-modal-title");
          const authSubtitle = document.getElementById("auth-subtitle");
          const authSubmitBtn = document.getElementById("auth-submit-btn");
          const authToggleBtn = document.getElementById("auth-toggle-btn");
          const authResetBtn = document.getElementById("auth-reset-btn");

          const signoutLink = document.getElementById("signout-link");
          const userChip = document.getElementById("user-chip");
          const userChipText = document.getElementById("user-chip-text");
          const openAuthBtnEl = document.getElementById("open-auth-modal");

          const openPremiumDashboard = document.getElementById("open-premium-dashboard");
          const manageMembership = document.getElementById("manage-membership");
          const premiumStatus = document.getElementById("premium-status");

          const navPremium = document.getElementById("nav-premium");
          const heroPremiumCTA = document.getElementById("hero-premium-cta");
          const premiumCardCTA = document.getElementById("premium-card-cta");
          const freePanelPremiumCTA = document.getElementById("free-panel-premium-cta");
          const premiumPanelCTA = document.getElementById("premium-panel-cta");

          let mode = "signin";
          let lastPremiumCheck = { ts: 0, isPremium: false, userId: null };

          function setMsg(text, isError=false){
            if (!authMsg) return;
            authMsg.textContent = text;
            authMsg.style.color = isError ? "#fca5a5" : "#e5e7eb";
          }

          function setPremiumStatus(text){
            if (premiumStatus) premiumStatus.textContent = text;
          }

          function setAuthMode(nextMode){
            mode = nextMode;
            if (!authTitle || !authSubtitle || !authSubmitBtn || !authToggleBtn) return;

            if (mode === "signin"){
              authTitle.textContent = "Sign in";
              authSubtitle.textContent = "Sign in to access premium tools and saved watchlists.";
              authSubmitBtn.textContent = "Sign in";
              authToggleBtn.textContent = "Create account";
            } else {
              authTitle.textContent = "Create account";
              authSubtitle.textContent = "Create an account so your premium subscription can unlock the dashboard.";
              authSubmitBtn.textContent = "Sign up";
              authToggleBtn.textContent = "I already have an account";
            }
            setMsg("");
          }

          function humanAuthError(err){
            const msg = (err && err.message ? String(err.message) : "").toLowerCase();
            if (msg.includes("invalid login") || msg.includes("invalid") || msg.includes("credentials")) return "That email or password doesn’t look right. Try again.";
            if (msg.includes("email not confirmed")) return "Check your inbox and confirm your email, then sign in.";
            if (msg.includes("rate limit") || msg.includes("too many")) return "Too many attempts. Wait a minute and try again.";
            if (msg.includes("network") || msg.includes("fetch")) return "Network issue. Check your connection and try again.";
            if (msg.includes("jwt") || msg.includes("token")) return "Session issue. Please refresh the page and try again.";
            return "We couldn’t complete that. Please try again.";
          }

          function setSignedOutUI(){
            if (openAuthBtnEl) openAuthBtnEl.style.display = "";
            if (signoutLink) signoutLink.style.display = "none";
            if (userChip) userChip.style.display = "none";
            if (userChipText) userChipText.textContent = "";
            if (userChip) userChip.classList.remove("premium");
            setPremiumStatus("Sign in to check access.");
          }

          function setSignedInUI(user, isPremium){
            if (openAuthBtnEl) openAuthBtnEl.style.display = "none";
            if (signoutLink) signoutLink.style.display = "";
            if (userChip){
              userChip.style.display = "";
              userChip.classList.toggle("premium", !!isPremium);
            }
            const email = user?.email ? String(user.email) : "Signed in";
            if (userChipText){
              userChipText.textContent = isPremium ? ("Premium • " + email) : ("Signed in • " + email);
            }
          }

          async function getUserSafe(){
            const res = await supabaseClient.auth.getUser();
            if (res.error) return null;
            return res.data?.user || null;
          }

          async function getProfileSafe(user){
            if (!user) return { data: null, error: null };
            const { data, error } = await supabaseClient
              .from("profiles")
              .select("id,email,is_premium")
              .eq("id", user.id)
              .maybeSingle();
            return { data: data || null, error: error || null };
          }

          async function createProfileSafe(user){
            if (!user) return { data: null, error: null };
            const { data, error } = await supabaseClient
              .from("profiles")
              .insert([{ id: user.id, email: user.email, is_premium: false }])
              .select("id,email,is_premium")
              .single();
            return { data: data || null, error: error || null };
          }

          async function ensureProfileSafe(user){
            const existing = await getProfileSafe(user);
            if (existing.data) return existing;
            if (existing.error) return existing;
            return await createProfileSafe(user);
          }

          async function checkPremium(user){
            if (!user) return { user: null, isPremium: false, status: "signed_out" };

            const now = Date.now();
            if (lastPremiumCheck.userId === user.id && (now - lastPremiumCheck.ts) < 5000){
              return { user, isPremium: lastPremiumCheck.isPremium, status: "cached" };
            }

            const prof = await ensureProfileSafe(user);

            if (prof.error){
              lastPremiumCheck = { ts: now, isPremium: false, userId: user.id };
              return { user, isPremium: false, status: "profile_blocked" };
            }

            const isPremium = !!prof.data?.is_premium;
            lastPremiumCheck = { ts: now, isPremium, userId: user.id };
            return { user, isPremium, status: "ok" };
          }

          // prevent overlapping refreshes
          let __refreshRunning = false;
          let __refreshQueued = false;

          function isAbortError(err){
            return err && (err.name === "AbortError" || String(err.message || "").toLowerCase().includes("signal is aborted"));
          }

          async function refreshUI(){
            if (__refreshRunning) { __refreshQueued = true; return { user: null, isPremium: false }; }
            __refreshRunning = true;

            try{
              const user = await getUserSafe();
              if (!user){ setSignedOutUI(); return { user: null, isPremium: false }; }

              const res = await checkPremium(user);
              setSignedInUI(user, res.isPremium);

              if (res.status === "profile_blocked"){
                setPremiumStatus("Signed in. Premium status can’t be verified right now.");
                return { user, isPremium: false };
              }

              setPremiumStatus(res.isPremium ? "Premium member ✅" : "Not premium — become a member to unlock the dashboard.");
              return { user, isPremium: res.isPremium };

            } catch(err){
              if (isAbortError(err)) return { user: null, isPremium: false };
              console.warn("[auth] refreshUI error:", err);
              return { user: null, isPremium: false };

            } finally {
              __refreshRunning = false;
              if (__refreshQueued){
                __refreshQueued = false;
                setTimeout(() => refreshUI(), 0);
              }
            }
          }

          async function routePremium(e){
            if (e) e.preventDefault();

            const sub = document.getElementById("premium-modal-subtitle");
            if (sub){
              sub.textContent = "Premium unlocks the members dashboard (premium.html). Sign in + upgrade to access deep dives and tools.";
            }

            const user = await getUserSafe();
            if (!user){
              openAuthModal(e);
              setMsg("Sign in first, then we’ll check premium access.", false);
              return;
            }

            const res = await checkPremium(user);

            if (res.status === "profile_blocked"){
              openPremiumModal(e);
              return;
            }

            if (res.isPremium){
              window.location.href = "premium.html";
              return;
            }

            openPremiumModal(e);
          }

          window.__FTN__.routePremium = routePremium;

          // Auth handlers
          setAuthMode("signin");

          if (authToggleBtn){
            authToggleBtn.addEventListener("click",(e)=>{
              e.preventDefault();
              setAuthMode(mode === "signin" ? "signup" : "signin");
            });
          }

          if (authForm){
            authForm.addEventListener("submit", async (e)=>{
              e.preventDefault();
              setMsg("");

              const email = (authEmail?.value || "").trim();
              const password = (authPassword?.value || "");

              if (!email || !password){
                setMsg("Enter email + password.", true);
                return;
              }

              try{
                if (authSubmitBtn) authSubmitBtn.disabled = true;

                if (mode === "signin"){
                  const { error } = await supabaseClient.auth.signInWithPassword({ email, password });
                  if (error) { setMsg(humanAuthError(error), true); return; }

                  setMsg("Signed in ✅", false);
                  closeAuthModal();
                  await refreshUI();
                  return;
                }

                // signup (optional: email redirect if your project uses email confirmation)
                const origin = window.location.origin;
                const emailRedirectTo = (origin && origin !== "null") ? (origin + "/") : undefined;

                const { error } = await supabaseClient.auth.signUp({
                  email,
                  password,
                  options: emailRedirectTo ? { emailRedirectTo } : undefined
                });

                if (error) { setMsg(humanAuthError(error), true); return; }

                setMsg("Account created. Check your email to confirm, then sign in.", false);

              } catch(err){
                setMsg(humanAuthError(err), true);
              } finally {
                if (authSubmitBtn) authSubmitBtn.disabled = false;
              }
            });
          }

          if (authResetBtn){
            authResetBtn.addEventListener("click", async (e)=>{
              e.preventDefault();
              setMsg("");

              const email = (authEmail?.value || "").trim();
              if (!email){
                setMsg("Type your email above first, then click Forgot password.", true);
                return;
              }

              try{
                const origin = window.location.origin;
                const redirectTo = (origin && origin !== "null") ? (origin + "/") : undefined;

                const { error } = await supabaseClient.auth.resetPasswordForEmail(
                  email,
                  redirectTo ? { redirectTo } : undefined
                );

                if (error) { setMsg(humanAuthError(error), true); return; }
                setMsg("Password reset email sent. Check your inbox.", false);

              } catch(err){
                setMsg(humanAuthError(err), true);
              }
            });
          }

          if (signoutLink){
            signoutLink.addEventListener("click", async (e)=>{
              e.preventDefault();
              try{ await supabaseClient.auth.signOut(); } catch(_){}
              setSignedOutUI();
              closeAnyOpenModal();
            });
          }

          // Wire premium CTAs
          [navPremium, heroPremiumCTA, premiumCardCTA, freePanelPremiumCTA, premiumPanelCTA, openPremiumDashboard]
            .filter(Boolean)
            .forEach(el => el.addEventListener("click", routePremium));

          if (manageMembership){
            manageMembership.addEventListener("click",(e)=>{
              e.preventDefault();
              window.open(PAYMENT_LINK, "_blank", "noopener");
            });
          }

          // Keep UI in sync
          supabaseClient.auth.onAuthStateChange(async ()=>{
            await refreshUI();
          });

          await refreshUI();

        } catch(err){
          console.warn("[auth] initSupabase error:", err);
        }
      })();

      // Keyboard support for wheel
      window.addEventListener("keydown",(e)=>{
        if (e.key === "ArrowLeft") setWheel(wheelIdx - 1);
        if (e.key === "ArrowRight") setWheel(wheelIdx + 1);
      });

      // “Search”: send to archive.html with query param
      const freeSearch = document.getElementById("freeSearch");
      if (freeSearch){
        freeSearch.addEventListener("keydown",(e)=>{
          if (e.key !== "Enter") return;
          const q = (freeSearch.value || "").trim();
          if (!q) return;
          window.location.href = "archive.html?q=" + encodeURIComponent(q);
        });
      }

    })();
  </script>
</body>
</html>
