<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FinTrend News</title>

  <link rel="icon" type="image/png" href="assets/img/favicon.png" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet" />

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-KSK5YVPJBR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-KSK5YVPJBR');
  </script>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>

  <style>
    :root{
      --bg:#050816;
      --panel: rgba(15, 23, 42, 0.88);
      --panel2: rgba(2, 6, 23, 0.38);
      --text:#f9fafb;
      --muted:#9ca3af;
      --border: rgba(148, 163, 184, 0.28);
      --accent:#f4c15d;
      --accent2: rgba(244,193,93,0.12);
      --radius: 22px;
      --shadow: 0 18px 45px rgba(0,0,0,0.45);
      --max: 1150px;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      color:var(--text);
      background:
        radial-gradient(circle at top, rgba(17, 24, 39, 0.72) 0, rgba(2, 6, 23, 0.88) 45%, rgba(0,0,0,0.92) 100%),
        url("assets/img/bg-candles.png");
      background-size:cover;
      background-position:center;
      background-attachment:fixed;
      line-height:1.6;
    }

    a{color:inherit;text-decoration:none}
    a:hover{color:var(--accent)}

    .wrap{max-width:var(--max);margin:16px auto 70px;padding:0 16px}

    /* ── HEADER ── */
    header{
      position:sticky;top:0;z-index:9999;
      border:1px solid rgba(148,163,184,0.20);
      border-radius:var(--radius);
      overflow:hidden;
      background:linear-gradient(135deg,rgba(15,23,42,0.96),rgba(15,23,42,0.84));
      backdrop-filter:blur(6px);
      box-shadow:0 10px 24px rgba(0,0,0,0.35);
      margin-bottom:14px;
    }

    .ticker{
      border-bottom:1px solid rgba(148,163,184,0.22);
      background:radial-gradient(circle at top,#020617 0,#000 65%);
      padding:6px 16px;
    }

    /* Centered brand block */
    .headerBrand{
      display:flex;
      flex-direction:column;
      align-items:center;
      padding:18px 22px 12px;
      border-bottom:1px solid rgba(148,163,184,0.14);
    }
    .headerBrandTop{
      display:flex;align-items:center;gap:20px;
    }
    .logo{height:66px;width:auto;display:block;}
    .brand h1{
      font-family:"Playfair Display",serif;
      letter-spacing:.18em;text-transform:uppercase;
      font-size:38px;line-height:1.05;color:var(--accent);
    }
    .brand p{
      margin-top:5px;font-size:12px;color:var(--muted);
      letter-spacing:.14em;text-transform:uppercase;
    }

    /* Nav row — centered below title */
    .headerNav{
      display:flex;align-items:center;justify-content:center;
      gap:4px;flex-wrap:wrap;
      padding:10px 22px 14px;
    }
    .navLink{
      font-size:11px;color:var(--muted);
      letter-spacing:.10em;text-transform:uppercase;
      cursor:pointer;padding:6px 12px;
      border-radius:999px;border:1px solid transparent;
      transition:.15s ease;
    }
    .navLink:hover{color:var(--accent);border-color:rgba(244,193,93,0.22);}
    .navDivider{width:1px;height:14px;background:rgba(148,163,184,0.20);flex-shrink:0;}

    .btn{
      border:0;cursor:pointer;border-radius:999px;
      padding:8px 16px;font-size:11px;
      letter-spacing:.10em;text-transform:uppercase;font-weight:700;
      transition:.18s ease;
    }
    .btnPrimary{background:var(--accent);color:#000;box-shadow:0 12px 28px rgba(244,193,93,0.16);}
    .btnPrimary:hover{background:#f7d680;transform:translateY(-1px);}
    .btnPrimary:disabled{opacity:0.5;cursor:not-allowed;transform:none;}
    .btnGhost{
      background:rgba(2,6,23,0.35);border:1px solid rgba(148,163,184,0.30);
      color:var(--text);font-weight:600;
    }
    .btnGhost:hover{border-color:rgba(244,193,93,0.38);transform:translateY(-1px);}

    .chip{
      display:none;align-items:center;gap:8px;padding:6px 10px;
      border-radius:999px;border:1px solid rgba(148,163,184,0.28);
      background:rgba(2,6,23,0.35);color:var(--muted);
      max-width:220px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:11px;
    }
    .chipDot{width:7px;height:7px;border-radius:999px;background:rgba(148,163,184,0.5);box-shadow:0 0 0 4px rgba(148,163,184,0.12);flex-shrink:0;}
    .chip.premium .chipDot{background:rgba(147,197,253,0.95);box-shadow:0 0 0 4px rgba(147,197,253,0.12);}

    @media(max-width:700px){
      .headerBrandTop{flex-direction:column;gap:8px;}
      .brand h1{font-size:28px;text-align:center;}
      .brand p{text-align:center;}
      .logo{height:52px;}
    }

    /* ── PANELS ── */
    .panel{
      background:var(--panel);border:1px solid var(--border);
      border-radius:var(--radius);box-shadow:var(--shadow);
      padding:28px;margin-top:16px;
      position:relative;overflow:hidden;backdrop-filter:blur(6px);
    }
    .panel::before{
      content:"";position:absolute;inset:-35%;
      background:radial-gradient(circle at top left,rgba(244,193,93,0.10),transparent 55%);
      pointer-events:none;opacity:.85;
    }
    .panelHead{
      position:relative;z-index:1;
      display:flex;justify-content:space-between;gap:14px;flex-wrap:wrap;margin-bottom:20px;
    }
    .kicker{color:var(--muted);text-transform:uppercase;letter-spacing:.16em;font-size:11px;}
    .subk{color:var(--muted);font-size:13px;margin-top:4px;}

    /* ── HERO ── */
    .heroGrid{
      position:relative;z-index:1;
      display:grid;grid-template-columns:1.1fr 0.9fr;
      gap:20px;align-items:start;
    }
    @media(max-width:920px){.heroGrid{grid-template-columns:1fr;}}

    .heroCopy h2{
      font-family:"Playfair Display",serif;
      font-size:44px;line-height:1.08;margin-bottom:12px;
    }
    .heroCopy h2 span{
      background:linear-gradient(135deg,#fef3c7,#fbbf24,#fb923c);
      -webkit-background-clip:text;color:transparent;
    }
    .heroCopy p{color:#e5e7eb;font-size:15px;max-width:60ch;margin-bottom:16px;line-height:1.7;}

    .heroActions{display:flex;gap:10px;flex-wrap:wrap;align-items:center;}
    .reassure{margin-top:10px;font-size:12px;color:var(--muted);}

    /* ── STATS ROW ── */
    .statsRow{
      position:relative;z-index:1;
      display:flex;gap:0;flex-wrap:wrap;
      margin-top:22px;
      border:1px solid rgba(148,163,184,0.18);
      border-radius:16px;overflow:hidden;
    }
    .statItem{
      flex:1;min-width:110px;
      padding:16px 14px;text-align:center;
      border-right:1px solid rgba(148,163,184,0.18);
      background:rgba(2,6,23,0.30);
    }
    .statItem:last-child{border-right:0;}
    .statNum{font-family:"Playfair Display",serif;font-size:28px;color:var(--accent);line-height:1;margin-bottom:4px;}
    .statLabel{font-size:11px;color:var(--muted);letter-spacing:.10em;text-transform:uppercase;}
    @media(max-width:600px){
      .statItem{flex:1 1 45%;}
      .statItem:nth-child(2){border-right:0;}
      .statItem:nth-child(3){border-right:1px solid rgba(148,163,184,0.18);border-top:1px solid rgba(148,163,184,0.18);}
      .statItem:nth-child(4){border-right:0;border-top:1px solid rgba(148,163,184,0.18);}
    }

    /* ── RIGHT COLUMN ── */
    .rightStack{display:flex;flex-direction:column;gap:14px;}

    /* Sample brief */
    .sampleBrief{
      border:1px solid rgba(148,163,184,0.22);
      background:rgba(2,6,23,0.45);border-radius:18px;overflow:hidden;
    }
    .sampleBriefHead{
      padding:12px 16px;border-bottom:1px solid rgba(148,163,184,0.14);
      display:flex;justify-content:space-between;align-items:center;
    }
    .sampleBriefLabel{font-size:11px;color:var(--muted);letter-spacing:.16em;text-transform:uppercase;}
    .sampleBriefDate{font-size:11px;color:rgba(148,163,184,0.40);font-style:italic;}
    .sampleBriefRows{padding:4px 0;}
    .sampleBriefRow{
      display:flex;gap:14px;align-items:flex-start;
      padding:10px 16px;border-bottom:1px solid rgba(148,163,184,0.07);transition:background .15s;
    }
    .sampleBriefRow:last-child{border-bottom:0;}
    .sampleBriefRow:hover{background:rgba(244,193,93,0.04);}
    .sampleBriefTag{font-size:10px;letter-spacing:.14em;text-transform:uppercase;color:var(--accent);min-width:80px;padding-top:2px;font-weight:600;flex-shrink:0;}
    .sampleBriefText{font-size:13px;color:#e5e7eb;line-height:1.5;}
    .sampleBriefFoot{padding:9px 16px;font-size:10px;color:rgba(148,163,184,0.40);border-top:1px solid rgba(148,163,184,0.12);background:rgba(2,6,23,0.30);}

    /* Market chart */
    .rotCard{border-radius:18px;border:1px solid rgba(148,163,184,0.22);background:rgba(2,6,23,0.35);overflow:hidden;}
    .rotCardHead{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;border-bottom:1px solid rgba(148,163,184,0.14);}
    .rotTitle{font-size:11px;letter-spacing:.14em;text-transform:uppercase;color:var(--muted);}
    .rotNow{font-size:11px;letter-spacing:.12em;text-transform:uppercase;color:var(--accent);}
    .chartBtns{display:flex;gap:6px;flex-wrap:wrap;padding:10px 14px 6px;}
    .chartBtnSym{
      border:1px solid rgba(148,163,184,0.28);background:rgba(2,6,23,0.30);
      color:var(--muted);border-radius:999px;padding:5px 10px;
      cursor:pointer;font-size:11px;letter-spacing:.10em;text-transform:uppercase;transition:.15s ease;
    }
    .chartBtnSym:hover{border-color:rgba(244,193,93,0.35);}
    .chartBtnSym.active{border-color:rgba(244,193,93,0.55);background:rgba(244,193,93,0.10);color:var(--accent);}
    .chartInner{padding:4px 8px 8px;}

    /* ── COMPARISON ── */
    .comparePanel{
      background:var(--panel);border:1px solid var(--border);
      border-radius:var(--radius);box-shadow:var(--shadow);
      margin-top:16px;position:relative;overflow:hidden;backdrop-filter:blur(6px);
    }
    .comparePanel::before{
      content:"";position:absolute;inset:-35%;
      background:radial-gradient(circle at top right,rgba(244,193,93,0.10),transparent 55%);
      pointer-events:none;opacity:.85;
    }
    .compareHead{position:relative;z-index:1;padding:24px 28px 16px;border-bottom:1px solid rgba(148,163,184,0.14);}
    .compareHead h2{font-family:"Playfair Display",serif;font-size:28px;margin-top:6px;}

    .compareGrid{
      position:relative;z-index:1;
      display:grid;grid-template-columns:1fr 1fr;
    }
    @media(max-width:760px){.compareGrid{grid-template-columns:1fr;}}

    .compareCol{padding:22px 28px;}
    .compareCol+.compareCol{border-left:1px solid rgba(148,163,184,0.14);}
    @media(max-width:760px){.compareCol+.compareCol{border-left:0;border-top:1px solid rgba(148,163,184,0.14);}}

    .compareColHead{display:flex;align-items:center;gap:10px;margin-bottom:16px;}
    .compareTier{font-family:"Playfair Display",serif;font-size:20px;font-weight:700;}
    .compareBadgeFree{font-size:10px;letter-spacing:.14em;text-transform:uppercase;background:rgba(148,163,184,0.10);border:1px solid rgba(148,163,184,0.24);color:var(--muted);padding:3px 8px;border-radius:999px;}
    .compareBadgePremium{font-size:10px;letter-spacing:.14em;text-transform:uppercase;background:rgba(244,193,93,0.10);border:1px solid rgba(244,193,93,0.30);color:var(--accent);padding:3px 8px;border-radius:999px;}

    .compareList{list-style:none;padding:0;margin:0;}
    .compareList li{padding:8px 0;border-bottom:1px solid rgba(148,163,184,0.07);font-size:13px;color:#d1d5db;display:flex;align-items:flex-start;gap:8px;}
    .compareList li:last-child{border-bottom:0;}
    .compareList li::before{content:"✓";color:rgba(148,163,184,0.45);font-size:12px;flex-shrink:0;margin-top:1px;}
    .compareList.premium li::before{content:"✦";color:var(--accent);font-size:10px;margin-top:2px;}

    .compareCTARow{
      position:relative;z-index:1;
      display:grid;grid-template-columns:1fr 1fr;
      border-top:1px solid rgba(148,163,184,0.14);
    }
    @media(max-width:760px){.compareCTARow{grid-template-columns:1fr;}}
    .compareCTACol{padding:18px 28px;}
    .compareCTACol+.compareCTACol{border-left:1px solid rgba(148,163,184,0.14);}
    @media(max-width:760px){.compareCTACol+.compareCTACol{border-left:0;border-top:1px solid rgba(148,163,184,0.14);}}

    /* ── WEEK MAP ── */
    .weekGrid{
      position:relative;z-index:1;
      display:grid;grid-template-columns:0.95fr 1.05fr;
      gap:14px;align-items:stretch;
    }
    @media(max-width:980px){.weekGrid{grid-template-columns:1fr;}}

    .weekLeft{border-radius:18px;border:1px solid rgba(148,163,184,0.22);background:rgba(2,6,23,0.35);padding:20px;}
    .weekLeft h3{font-family:"Playfair Display",serif;font-size:24px;line-height:1.15;margin:6px 0 10px;}
    .weekLeft p{color:#d1d5db;font-size:13px;max-width:60ch;line-height:1.7;}

    .dayPills{display:flex;gap:8px;flex-wrap:wrap;margin-top:14px;}
    .pill{border:1px solid rgba(148,163,184,0.28);background:rgba(2,6,23,0.30);color:var(--muted);border-radius:999px;padding:8px 14px;cursor:pointer;font-size:11px;letter-spacing:.12em;text-transform:uppercase;transition:.18s ease;user-select:none;}
    .pill:hover{transform:translateY(-1px);border-color:rgba(244,193,93,0.35);}
    .pill.active{border-color:rgba(244,193,93,0.55);background:rgba(244,193,93,0.10);color:var(--accent);box-shadow:0 0 0 4px rgba(244,193,93,0.08);}

    .weekRight{border-radius:18px;border:1px solid rgba(148,163,184,0.22);background:rgba(2,6,23,0.35);padding:20px;overflow:hidden;position:relative;}
    .weekRight::before{content:"";position:absolute;inset:-40%;background:radial-gradient(circle at top right,rgba(244,193,93,0.12),transparent 55%);pointer-events:none;opacity:.8;}

    .weekCard{position:relative;z-index:1;border-radius:14px;border:1px solid rgba(148,163,184,0.18);background:rgba(15,23,42,0.62);padding:16px;}
    .weekCardTop{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:baseline;margin-bottom:10px;}
    .weekLabel{font-weight:700;color:#e5e7eb;font-size:18px;line-height:1.2;}
    .weekMeta{font-size:11px;color:var(--muted);letter-spacing:.14em;text-transform:uppercase;border:1px solid rgba(148,163,184,0.26);background:rgba(2,6,23,0.30);padding:4px 8px;border-radius:999px;}
    .weekDesc{color:#d1d5db;font-size:13px;margin-bottom:12px;line-height:1.65;}
    .weekBullets{padding-left:18px;color:#e5e7eb;font-size:13px;}
    .weekBullets li{margin-bottom:7px;}

    .chartRow{position:relative;z-index:1;display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-top:14px;}
    .watchBtn{border:1px solid rgba(148,163,184,0.30);background:rgba(2,6,23,0.35);color:var(--text);border-radius:999px;padding:6px 12px;font-size:11px;letter-spacing:.12em;text-transform:uppercase;cursor:pointer;transition:.18s ease;}
    .watchBtn:hover{transform:translateY(-1px);border-color:rgba(244,193,93,0.35);}
    .watchBtn.active{border-color:rgba(244,193,93,0.55);background:rgba(244,193,93,0.10);color:var(--accent);}
    .chartBox{margin-top:10px;border:1px solid rgba(148,163,184,0.18);background:rgba(2,6,23,0.25);border-radius:14px;padding:6px;overflow:hidden;}

    /* ── PREMIUM CARD ── */
    .premiumCard{border-radius:18px;border:1px solid rgba(148,163,184,0.22);background:rgba(2,6,23,0.35);padding:22px;position:relative;overflow:hidden;}
    .premiumCard::before{content:"";position:absolute;inset:-55%;background:radial-gradient(circle at 30% 20%,rgba(147,197,253,0.12),transparent 55%),radial-gradient(circle at 70% 60%,rgba(244,193,93,0.10),transparent 55%);pointer-events:none;}
    .orb{position:absolute;right:-26px;top:-26px;width:160px;height:160px;border-radius:999px;border:1px solid rgba(147,197,253,0.22);background:radial-gradient(circle at 35% 35%,rgba(147,197,253,0.28),rgba(2,6,23,0) 55%),radial-gradient(circle at 70% 70%,rgba(244,193,93,0.14),rgba(2,6,23,0) 55%);box-shadow:inset 0 0 0 10px rgba(147,197,253,0.04),0 18px 50px rgba(0,0,0,0.35);animation:orbspin 12s linear infinite;pointer-events:none;}
    .orb::after{content:"";position:absolute;inset:16px;border-radius:999px;border:1px dashed rgba(244,193,93,0.22);animation:orbspin 8s linear infinite reverse;}
    @keyframes orbspin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
    .premiumInner{position:relative;z-index:1;}
    .premiumTitle{font-family:"Playfair Display",serif;font-size:22px;line-height:1.15;margin:6px 0 8px;}
    .premiumText{font-size:13px;color:#d1d5db;max-width:52ch;margin-bottom:14px;line-height:1.65;}

    .premiumSplit{position:relative;z-index:1;display:grid;grid-template-columns:1.1fr 0.9fr;gap:20px;align-items:center;}
    @media(max-width:860px){.premiumSplit{grid-template-columns:1fr;}}

    /* ── EMAIL SECTION (bottom) ── */
    .emailPanel{
      background:var(--panel);border:1px solid var(--border);
      border-radius:var(--radius);box-shadow:var(--shadow);
      padding:36px 28px;margin-top:16px;
      position:relative;overflow:hidden;backdrop-filter:blur(6px);
      text-align:center;
    }
    .emailPanel::before{content:"";position:absolute;inset:-35%;background:radial-gradient(circle at bottom center,rgba(244,193,93,0.08),transparent 55%);pointer-events:none;}
    .emailPanel h3{font-family:"Playfair Display",serif;font-size:26px;margin-bottom:8px;position:relative;z-index:1;}
    .emailPanel p{font-size:13px;color:var(--muted);margin-bottom:18px;position:relative;z-index:1;}
    .emailForm{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;max-width:440px;margin:0 auto;position:relative;z-index:1;}
    .emailIn{flex:1;min-width:200px;padding:10px 16px;border-radius:999px;border:1px solid rgba(148,163,184,0.35);background:rgba(2,6,23,0.60);color:var(--text);font-size:13px;outline:none;transition:border-color .15s;}
    .emailIn:focus{border-color:rgba(244,193,93,0.40);}
    .emailNote{font-size:11px;color:var(--muted);margin-top:10px;position:relative;z-index:1;}

    /* ── FOOTER ── */
    footer{margin-top:22px;text-align:center;color:var(--muted);font-size:11px;}

    /* ── MODALS ── */
    .modalBackdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.62);z-index:100000;padding:14px;}
    .modalBackdrop.active{display:flex;}
    .modal{width:100%;max-width:460px;border-radius:24px;border:1px solid rgba(148,163,184,0.35);background:rgba(15,23,42,0.97);box-shadow:var(--shadow);padding:22px 22px 18px;position:relative;}
    .modalClose{position:absolute;top:10px;right:12px;border:0;background:transparent;color:var(--muted);font-size:22px;cursor:pointer;}
    .modalK{font-size:11px;color:var(--muted);letter-spacing:.18em;text-transform:uppercase;margin-bottom:4px;}
    .modalH{font-family:"Playfair Display",serif;font-size:22px;margin-bottom:6px;}
    .modalP{font-size:13px;color:#d1d5db;margin-bottom:12px;}
    .in{width:100%;padding:10px 12px;border-radius:14px;border:1px solid rgba(148,163,184,0.4);background:#020617;color:var(--text);font-size:12px;}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;}
    .msg{margin-top:10px;font-size:12px;color:#e5e7eb;}
  </style>
</head>

<body>
  <div class="wrap">

    <!-- ── HEADER ── -->
    <header>
      <div class="ticker">
        <div class="tradingview-widget-container">
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
{
  "symbols": [
    { "proName": "FOREXCOM:SPXUSD", "title": "S&P 500" },
    { "proName": "NASDAQ:NDX", "title": "Nasdaq 100" },
    { "proName": "DJI", "title": "Dow 30" },
    { "proName": "RUSSELL:RTY", "title": "Russell 2000" },
    { "proName": "OANDA:EURUSD", "title": "EURUSD" },
    { "proName": "COINBASE:BTCUSD", "title": "BTCUSD" },
    { "proName": "OANDA:WTICOUSD", "title": "WTI Crude" },
    { "proName": "OANDA:XAUUSD", "title": "Gold" }
  ],
  "colorTheme": "dark",
  "isTransparent": true,
  "displayMode": "adaptive",
  "locale": "en"
}
          </script>
        </div>
      </div>

      <!-- Centered brand + logo -->
      <div class="headerBrand">
        <div class="headerBrandTop">
          <img src="assets/img/FTN-logo.png" class="logo" alt="FinTrend News logo" />
          <div class="brand">
            <h1>FinTrend News</h1>
            <p>Market briefing, not noise</p>
          </div>
        </div>
      </div>

      <!-- All nav links centered underneath -->
      <div class="headerNav">
        <a class="navLink" href="archive.html">Archive</a>
        <div class="navDivider"></div>
        <a class="navLink" href="#week">Week Map</a>
        <div class="navDivider"></div>
        <a class="navLink" href="#premium">Premium</a>
        <div class="navDivider"></div>
        <a class="navLink" href="#" id="open-auth" style="display:none;">Sign In</a>
        <a class="navLink" href="#" id="signout" style="display:none;">Sign Out</a>
        <div class="chip" id="chip">
          <span class="chipDot"></span>
          <span id="chipText">Signed in</span>
        </div>
        <a class="btn btnPrimary" href="https://buy.stripe.com/aFabJ0auNdEVbnR4m2ffy00" target="_blank" rel="noopener" style="padding:8px 18px;font-size:11px;">Buy Premium →</a>
      </div>
    </header>

    <!-- ── HERO ── -->
    <section class="panel" id="top">
      <div class="heroGrid">

        <div class="heroCopy">
          <div class="kicker" style="margin-bottom:8px;">Market Intelligence</div>
          <h2>A <span>market brief</span> built for fast decisions.</h2>
          <p>Clear drivers → implications → levels. No long story. Just what matters and what changes the view.</p>

          <div class="heroActions">
            <button class="btn btnPrimary" id="cta-create-2" style="padding:10px 22px;font-size:12px;">Create Free Account</button>
            <a class="btn btnGhost" href="archive.html" style="padding:10px 18px;font-size:12px;">Browse Free Articles</a>
          </div>
          <div class="reassure">No credit card required</div>

          <div class="statsRow">
            <div class="statItem">
              <div class="statNum">180+</div>
              <div class="statLabel">Articles</div>
            </div>
            <div class="statItem">
              <div class="statNum">4×</div>
              <div class="statLabel">Weekly formats</div>
            </div>
            <div class="statItem">
              <div class="statNum">100%</div>
              <div class="statLabel">Signal focused</div>
            </div>
            <div class="statItem">
              <div class="statNum">Free</div>
              <div class="statLabel">To start</div>
            </div>
          </div>
        </div>

        <div class="rightStack">
          <!-- Example briefing card -->
          <div class="sampleBrief" aria-label="Example Briefing Format">
            <div class="sampleBriefHead">
              <div class="sampleBriefLabel">Example Briefing Format</div>
              <div class="sampleBriefDate">Illustrative only</div>
            </div>
            <div class="sampleBriefRows">
              <div class="sampleBriefRow">
                <div class="sampleBriefTag">Driver</div>
                <div class="sampleBriefText">Inflation surprise shifts rate expectations.</div>
              </div>
              <div class="sampleBriefRow">
                <div class="sampleBriefTag">Bias</div>
                <div class="sampleBriefText">Short-term risk-off while yields stabilize.</div>
              </div>
              <div class="sampleBriefRow">
                <div class="sampleBriefTag">Key Levels</div>
                <div class="sampleBriefText">Support / resistance zones to monitor.</div>
              </div>
              <div class="sampleBriefRow">
                <div class="sampleBriefTag">Catalyst</div>
                <div class="sampleBriefText">Upcoming central bank commentary.</div>
              </div>
            </div>
            <div class="sampleBriefFoot">Educational content only · Not financial advice</div>
          </div>

          <!-- Live chart -->
          <div class="rotCard">
            <div class="rotCardHead">
              <div class="rotTitle">Live Chart</div>
              <div class="rotNow" id="rotNow">SPX</div>
            </div>
            <div class="chartBtns">
              <button class="chartBtnSym active" data-rot="FOREXCOM:SPXUSD" data-label="SPX">SPX</button>
              <button class="chartBtnSym" data-rot="OANDA:EURUSD" data-label="EURUSD">EURUSD</button>
              <button class="chartBtnSym" data-rot="COINBASE:BTCUSD" data-label="BTC">BTC</button>
              <button class="chartBtnSym" data-rot="OANDA:XAUUSD" data-label="Gold">Gold</button>
            </div>
            <div class="chartInner">
              <div id="rotChart"></div>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- ── FREE vs PREMIUM COMPARISON ── -->
    <section class="comparePanel" id="premium">
      <div class="compareHead">
        <div class="kicker">What you get</div>
        <h2>Free vs Premium</h2>
        <div class="subk">Start free. Upgrade when you're ready.</div>
      </div>

      <div class="compareGrid">
        <div class="compareCol">
          <div class="compareColHead">
            <div class="compareTier">Free Account</div>
            <div class="compareBadgeFree">Free forever</div>
          </div>
          <ul class="compareList">
            <li>All public market briefings</li>
            <li>Monday · Wednesday · Friday · Sunday formats</li>
            <li>Live chart access</li>
            <li>Article archive (180+ pieces)</li>
            <li>Week Map framework</li>
          </ul>
        </div>
        <div class="compareCol" style="background:rgba(244,193,93,0.03);">
          <div class="compareColHead">
            <div class="compareTier" style="color:var(--accent);">Premium</div>
            <div class="compareBadgePremium">✦ Full access</div>
          </div>
          <ul class="compareList premium">
            <li>Everything in Free</li>
            <li>Long-form sector reports</li>
            <li>Drivers · Positioning · Catalysts · Levels</li>
            <li>Full members dashboard</li>
            <li>New reports as they publish</li>
          </ul>
        </div>
      </div>

      <div class="compareCTARow">
        <div class="compareCTACol">
          <button class="btn btnGhost" id="cta-create-3" style="padding:10px 22px;font-size:12px;">Create Free Account</button>
          <div class="reassure" style="margin-top:8px;">No credit card required</div>
        </div>
        <div class="compareCTACol">
          <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;">
            <a class="btn btnPrimary" href="https://buy.stripe.com/aFabJ0auNdEVbnR4m2ffy00" target="_blank" rel="noopener" style="padding:10px 22px;font-size:12px;">Buy Premium →</a>
            <button class="btn btnGhost" id="goPremium" style="padding:10px 18px;font-size:12px;">Learn More</button>
          </div>
          <div class="reassure" id="premiumStatus" style="display:none;margin-top:8px;"></div>
        </div>
      </div>
    </section>

    <!-- ── WEEK MAP ── -->
    <section class="panel" id="week">
      <div class="panelHead">
        <div>
          <div class="kicker">Week Map</div>
          <div style="font-family:'Playfair Display',serif;font-size:28px;margin-top:6px;">4 formats. One consistent framework.</div>
          <div class="subk" style="margin-top:4px;">Pick a day to see exactly what you get.</div>
        </div>
      </div>

      <div class="weekGrid">
        <div class="weekLeft">
          <p>Monday sets the bias. Wednesday checks the momentum. Friday recaps what actually changed. Sunday maps the week ahead.</p>

          <div class="dayPills">
            <button class="pill active" data-day="mon">Mon</button>
            <button class="pill" data-day="wed">Wed</button>
            <button class="pill" data-day="fri">Fri</button>
            <button class="pill" data-day="sun">Sun</button>
          </div>

          <div class="heroActions" style="margin-top:18px;">
            <button class="btn btnPrimary" id="cta-create-4" style="padding:10px 20px;font-size:12px;">Create Free Account</button>
          </div>
          <div style="margin-top:10px;">
            <a href="archive.html" style="font-size:12px;color:var(--muted);letter-spacing:.10em;text-transform:uppercase;">or browse free articles →</a>
          </div>
          <div class="reassure">No credit card required</div>
        </div>

        <div class="weekRight">
          <div class="weekCard" id="weekCard"></div>

          <div style="margin-top:16px;position:relative;z-index:1;">
            <div class="kicker" style="margin-bottom:10px;">Live Charts</div>
            <div class="chartRow">
              <button class="watchBtn active" data-symbol="FOREXCOM:SPXUSD">SPX</button>
              <button class="watchBtn" data-symbol="NASDAQ:NDX">NDX</button>
              <button class="watchBtn" data-symbol="OANDA:EURUSD">EURUSD</button>
              <button class="watchBtn" data-symbol="COINBASE:BTCUSD">BTC</button>
              <button class="watchBtn" data-symbol="OANDA:XAUUSD">Gold</button>
            </div>
            <div class="chartBox">
              <div id="watchChart"></div>
              <div id="watchFallback" class="reassure" style="display:none;margin-top:10px;">
                Chart unavailable. <a id="watchOpenTV" href="#" target="_blank" rel="noopener">Open on TradingView ↗</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ── PREMIUM SECTION ── -->
    <section class="panel">
      <div class="panelHead">
        <div>
          <div class="kicker">Premium</div>
          <div style="font-family:'Playfair Display',serif;font-size:28px;margin-top:6px;">Long-form reports. Built like a playbook.</div>
        </div>
      </div>

      <div class="premiumSplit">
        <div class="premiumCard">
          <div class="orb"></div>
          <div class="premiumInner">
            <div class="kicker" style="margin-bottom:8px;">What's inside each report</div>
            <ul style="list-style:none;padding:0;margin:0;">
              <li style="padding:9px 0;border-bottom:1px solid rgba(148,163,184,0.08);font-size:13px;color:#d1d5db;display:flex;gap:10px;align-items:flex-start;">
                <span style="color:var(--accent);font-size:11px;flex-shrink:0;padding-top:1px;">✦</span>
                <span><strong style="color:#e5e7eb;">Driver</strong> — what's actually moving the sector</span>
              </li>
              <li style="padding:9px 0;border-bottom:1px solid rgba(148,163,184,0.08);font-size:13px;color:#d1d5db;display:flex;gap:10px;align-items:flex-start;">
                <span style="color:var(--accent);font-size:11px;flex-shrink:0;padding-top:1px;">✦</span>
                <span><strong style="color:#e5e7eb;">Winners / Losers</strong> — who benefits and who gets hurt</span>
              </li>
              <li style="padding:9px 0;border-bottom:1px solid rgba(148,163,184,0.08);font-size:13px;color:#d1d5db;display:flex;gap:10px;align-items:flex-start;">
                <span style="color:var(--accent);font-size:11px;flex-shrink:0;padding-top:1px;">✦</span>
                <span><strong style="color:#e5e7eb;">Catalysts</strong> — what events change the story</span>
              </li>
              <li style="padding:9px 0;font-size:13px;color:#d1d5db;display:flex;gap:10px;align-items:flex-start;">
                <span style="color:var(--accent);font-size:11px;flex-shrink:0;padding-top:1px;">✦</span>
                <span><strong style="color:#e5e7eb;">Levels</strong> — the "if this breaks, we're wrong" points</span>
              </li>
            </ul>
          </div>
        </div>

        <div style="position:relative;z-index:1;">
          <div class="kicker" style="margin-bottom:8px;">Upgrade</div>
          <div style="font-family:'Playfair Display',serif;font-size:22px;margin-bottom:10px;line-height:1.2;">Unlock the full playbook.</div>
          <p style="font-size:13px;color:#d1d5db;margin-bottom:18px;line-height:1.7;">Premium members get access to every report and the full members dashboard.</p>
          <div style="display:flex;gap:10px;flex-wrap:wrap;">
            <a class="btn btnPrimary" href="https://buy.stripe.com/aFabJ0auNdEVbnR4m2ffy00" target="_blank" rel="noopener" style="padding:10px 22px;font-size:12px;">Buy Premium →</a>
            <button class="btn btnGhost" id="goPremiumTop" style="padding:10px 18px;font-size:12px;">Learn More</button>
          </div>
          <div class="reassure" id="premiumStatusTop" style="display:none;margin-top:10px;"></div>
        </div>
      </div>
    </section>

    <!-- ── EMAIL SIGNUP — bottom / last resort ── -->
    <section class="emailPanel">
      <h3>Get the briefing by email.</h3>
      <p>One email per briefing. No noise. Unsubscribe any time.</p>
      <form class="emailForm" onsubmit="handleEmailSub(event)">
        <input class="emailIn" type="email" placeholder="Your email address" required />
        <button class="btn btnPrimary" type="submit" style="padding:10px 20px;font-size:12px;white-space:nowrap;">Subscribe</button>
      </form>
      <div class="emailNote">No account needed · Unsubscribe anytime</div>
    </section>

    <footer>
      <p style="max-width:760px;margin:0 auto 8px;">
        <strong>Disclaimer:</strong> Informational + educational only. Not financial advice. Not a registered investment adviser.
      </p>
      <p style="margin-top:10px;">© 2026 FinTrend News · <a href="archive.html">Archive</a></p>
      <p style="margin-top:10px;display:flex;gap:16px;justify-content:center;flex-wrap:wrap;">
        <a href="#" id="openTos" style="color:var(--muted);font-size:11px;text-decoration:underline;text-underline-offset:3px;">Terms of Service</a>
        <a href="#" id="openRefund" style="color:var(--muted);font-size:11px;text-decoration:underline;text-underline-offset:3px;">Refund Policy</a>
        <a href="#" id="openPrivacy" style="color:var(--muted);font-size:11px;text-decoration:underline;text-underline-offset:3px;">Privacy Policy</a>
      </p>
    </footer>
  </div>

  <!-- ── TERMS OF SERVICE MODAL ── -->
  <div class="modalBackdrop" id="tosModal">
    <div class="modal" role="dialog" aria-modal="true" style="max-width:600px;max-height:85vh;overflow-y:auto;">
      <button class="modalClose" id="closeTos">×</button>
      <div class="modalK">FinTrend News</div>
      <div class="modalH">Terms of Service</div>
      <div style="font-size:12px;color:#9ca3af;margin-bottom:16px;">Last updated: February 2026</div>

      <div style="font-size:13px;color:#d1d5db;line-height:1.75;">

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">1. Acceptance of Terms</strong><br>
        By accessing or using FinTrend News ("the Service"), you agree to be bound by these Terms of Service. If you do not agree, do not use the Service.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">2. Not Financial Advice</strong><br>
        All content published on FinTrend News — including briefings, articles, market commentary, sector reports, and any other materials — is provided for <strong style="color:#f4c15d;">informational and educational purposes only</strong>. Nothing on this site constitutes financial advice, investment advice, trading advice, or any recommendation to buy, sell, or hold any security, asset, or financial instrument. FinTrend News is not a registered investment adviser, broker-dealer, or financial planner. Always conduct your own research and consult a licensed financial professional before making any investment decisions. You assume full responsibility for any financial decisions you make.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">3. No Guarantee of Accuracy</strong><br>
        While we strive to provide accurate and timely information, FinTrend News makes no representations or warranties of any kind regarding the completeness, accuracy, reliability, or timeliness of any content. Markets are inherently unpredictable. Past performance discussed in any content does not guarantee future results.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">4. User Accounts</strong><br>
        You are responsible for maintaining the confidentiality of your account credentials. You agree to notify us immediately of any unauthorized use of your account. We reserve the right to terminate accounts that violate these terms.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">5. Premium Subscriptions</strong><br>
        Premium access is provided on a subscription basis. By purchasing a subscription, you agree to our Refund Policy. We reserve the right to modify, suspend, or discontinue premium features at any time with reasonable notice.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">6. Intellectual Property</strong><br>
        All content on FinTrend News — including text, analysis, formatting, and structure — is the property of FinTrend News. You may not reproduce, distribute, republish, or resell any content without prior written permission. Personal, non-commercial use for reference is permitted.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">7. Limitation of Liability</strong><br>
        To the fullest extent permitted by law, FinTrend News and its operators shall not be liable for any direct, indirect, incidental, consequential, or punitive damages arising from your use of the Service or reliance on any content published herein. This includes any financial losses incurred as a result of actions taken based on content from this site.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">8. Third-Party Links & Data</strong><br>
        The Service may contain links to or embed data from third-party services (including TradingView). We are not responsible for the content, accuracy, or practices of any third-party service.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">9. Changes to Terms</strong><br>
        We reserve the right to update these Terms at any time. Continued use of the Service after changes are posted constitutes acceptance of the revised terms.</p>

        <p style="margin-bottom:0;"><strong style="color:#f9fafb;">10. Governing Law</strong><br>
        These Terms shall be governed by and construed in accordance with the laws of the United States. Any disputes shall be resolved in the jurisdiction where FinTrend News operates.</p>
      </div>

      <div style="margin-top:20px;">
        <button class="btn btnGhost" id="closeTos2" style="width:100%;">Close</button>
      </div>
    </div>
  </div>

  <!-- ── REFUND POLICY MODAL ── -->
  <div class="modalBackdrop" id="refundModal">
    <div class="modal" role="dialog" aria-modal="true" style="max-width:600px;max-height:85vh;overflow-y:auto;">
      <button class="modalClose" id="closeRefund">×</button>
      <div class="modalK">FinTrend News</div>
      <div class="modalH">Refund Policy</div>
      <div style="font-size:12px;color:#9ca3af;margin-bottom:16px;">Last updated: February 2026</div>

      <div style="font-size:13px;color:#d1d5db;line-height:1.75;">

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">Overview</strong><br>
        FinTrend News offers digital subscription products. Because our content is delivered immediately upon purchase, we have a limited refund policy as described below.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">7-Day Refund Window</strong><br>
        If you are not satisfied with your Premium subscription, you may request a full refund within <strong style="color:#f4c15d;">7 days of your initial purchase</strong>. After 7 days, no refunds will be issued for the current billing period. To request a refund, contact us at the email associated with your account.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">No Partial Refunds</strong><br>
        We do not offer partial refunds or prorated credits for unused portions of a subscription period beyond the 7-day window.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">Cancellations</strong><br>
        You may cancel your subscription at any time. Cancellation stops future charges but does not entitle you to a refund for the current billing period unless you are within the 7-day refund window. You will retain access to Premium content until the end of your paid period.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">Duplicate Charges</strong><br>
        If you were charged more than once in error, contact us immediately. Duplicate charges will be refunded in full with no time restriction.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">How to Request a Refund</strong><br>
        Email us with your account email address and order details. We process refund requests within 3–5 business days. Refunds are returned to the original payment method.</p>

        <p style="margin-bottom:0;"><strong style="color:#f9fafb;">Changes to This Policy</strong><br>
        We reserve the right to modify this Refund Policy at any time. Changes apply to new purchases made after the updated policy is posted.</p>
      </div>

      <div style="margin-top:20px;">
        <button class="btn btnGhost" id="closeRefund2" style="width:100%;">Close</button>
      </div>
    </div>
  </div>

  <!-- ── PRIVACY POLICY MODAL ── -->
  <div class="modalBackdrop" id="privacyModal">
    <div class="modal" role="dialog" aria-modal="true" style="max-width:600px;max-height:85vh;overflow-y:auto;">
      <button class="modalClose" id="closePrivacy">×</button>
      <div class="modalK">FinTrend News</div>
      <div class="modalH">Privacy Policy</div>
      <div style="font-size:12px;color:#9ca3af;margin-bottom:16px;">Last updated: February 2026</div>

      <div style="font-size:13px;color:#d1d5db;line-height:1.75;">

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">What We Collect</strong><br>
        We collect your email address and password when you create an account. If you subscribe to Premium, your payment is processed by Stripe — we do not store your card details. We may also collect basic usage data (pages visited, features used) via Google Analytics to improve the Service.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">How We Use Your Data</strong><br>
        Your email is used to: authenticate your account, send briefings you've subscribed to, and communicate important account or service updates. We do not sell your personal data to third parties. We do not use your data for advertising.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">Third-Party Services</strong><br>
        We use the following third-party services which may process your data under their own privacy policies: <strong style="color:#e5e7eb;">Supabase</strong> (account authentication and database), <strong style="color:#e5e7eb;">Stripe</strong> (payment processing), <strong style="color:#e5e7eb;">Google Analytics</strong> (anonymous usage analytics), <strong style="color:#e5e7eb;">TradingView</strong> (embedded market charts).</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">Cookies</strong><br>
        We use cookies and local storage to keep you signed in. Google Analytics uses cookies to track anonymous usage. You can disable cookies in your browser settings, though some features may not function correctly.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">Data Retention</strong><br>
        We retain your account data for as long as your account is active. You may request deletion of your account and associated data at any time by contacting us.</p>

        <p style="margin-bottom:14px;"><strong style="color:#f9fafb;">Your Rights</strong><br>
        Depending on your location, you may have rights to access, correct, or delete your personal data. To exercise these rights, contact us with your account email. EU/UK users have additional rights under GDPR/UK GDPR.</p>

        <p style="margin-bottom:0;"><strong style="color:#f9fafb;">Changes to This Policy</strong><br>
        We may update this Privacy Policy from time to time. We will notify you of significant changes via the email on your account.</p>
      </div>

      <div style="margin-top:20px;">
        <button class="btn btnGhost" id="closePrivacy2" style="width:100%;">Close</button>
      </div>
    </div>
  </div>

  <!-- ── AUTH MODAL ── -->
  <div class="modalBackdrop" id="authModal">
    <div class="modal" role="dialog" aria-modal="true">
      <button class="modalClose" id="closeAuth">×</button>
      <div class="modalK">FinTrend Account</div>
      <div class="modalH" id="authTitle">Create Free Account</div>
      <div class="modalP" id="authSubtitle">Create an account to unlock account-gated reads. No credit card.</div>
      <form id="authForm">
        <input class="in" id="email" type="email" placeholder="Email" required />
        <div style="height:10px"></div>
        <input class="in" id="password" type="password" placeholder="Password" required />
        <div class="row">
          <button class="btn btnPrimary" type="submit" id="authSubmit">Create Free Account</button>
          <button class="btn btnGhost" type="button" id="toggleMode">Already have an account?</button>
        </div>
        <div class="msg" id="authMsg"></div>
      </form>
    </div>
  </div>

  <!-- ── PREMIUM MODAL ── -->
  <div class="modalBackdrop" id="premiumModal">
    <div class="modal" role="dialog" aria-modal="true">
      <button class="modalClose" id="closePremium">×</button>
      <div class="modalK">FinTrend Premium</div>
      <div class="modalH">Upgrade to Premium</div>
      <div class="modalP">Unlock sector reports and the full members dashboard.</div>
      <div class="row">
        <a class="btn btnPrimary" href="#" id="payLink">Go Premium</a>
        <button class="btn btnGhost" id="closePremium2" type="button">Not now</button>
      </div>
    </div>
  </div>

  <script>
    function handleEmailSub(e){
      e.preventDefault();
      const form = e.target;
      form.innerHTML = '<p style="color:var(--accent);font-size:14px;padding:8px 0;">✓ You\'re on the list. Check your inbox.</p>';
    }

    (function(){
      "use strict";

      const PAYMENT_LINK = "https://buy.stripe.com/aFabJ0auNdEVbnR4m2ffy00";
      const PREMIUM_DASHBOARD = "premium.html";
      const FREE_ACCOUNT_PAGE = "archive.html";

      const authModal = document.getElementById("authModal");
      const premiumModal = document.getElementById("premiumModal");

      function openModal(m){ m.classList.add("active"); }
      function closeModal(m){ m.classList.remove("active"); }

      const authTitle = document.getElementById("authTitle");
      const authSubtitle = document.getElementById("authSubtitle");
      const authSubmit = document.getElementById("authSubmit");
      const toggleModeBtn = document.getElementById("toggleMode");
      const authMsg = document.getElementById("authMsg");
      const chip = document.getElementById("chip");
      const chipText = document.getElementById("chipText");
      const signout = document.getElementById("signout");
      const openAuth = document.getElementById("open-auth");
      

      document.getElementById("closeAuth").addEventListener("click",()=>closeModal(authModal));
      authModal.addEventListener("click",(e)=>{ if(e.target===authModal) closeModal(authModal); });
      document.getElementById("closePremium").addEventListener("click",()=>closeModal(premiumModal));
      document.getElementById("closePremium2").addEventListener("click",()=>closeModal(premiumModal));
      premiumModal.addEventListener("click",(e)=>{ if(e.target===premiumModal) closeModal(premiumModal); });

      let mode = "signup";
      function setMode(m){
        mode = m;
        if(authMsg) authMsg.textContent = "";
        if(authSubmit) authSubmit.disabled = false;
        if(mode === "signup"){
          authTitle.textContent = "Create Free Account";
          authSubtitle.textContent = "Create an account to unlock account-gated reads. No credit card.";
          authSubmit.textContent = "Create Free Account";
          toggleModeBtn.textContent = "Already have an account?";
        } else {
          authTitle.textContent = "Sign in";
          authSubtitle.textContent = "Sign in to continue reading and access your account.";
          authSubmit.textContent = "Sign in";
          toggleModeBtn.textContent = "Create Free Account";
        }
      }
      toggleModeBtn.addEventListener("click",()=>setMode(mode==="signup"?"signin":"signup"));
      openAuth.addEventListener("click",(e)=>{ e.preventDefault(); setMode("signin"); openModal(authModal); });

      ["cta-create-2","cta-create-3","cta-create-4"].forEach(id=>{
        const el = document.getElementById(id);
        if(el) el.addEventListener("click",()=>{ setMode("signup"); openModal(authModal); });
      });

      function humanErr(err){
        const raw = (err && err.message) ? String(err.message) : String(err || "");
        const msg = raw.toLowerCase();
        if(msg.includes("invalid login")||msg.includes("credentials")) return "Wrong email or password.";
        if(msg.includes("email not confirmed")) return "Confirm your email, then sign in.";
        if(msg.includes("rate limit")||msg.includes("too many")) return "Too many attempts. Try again in a minute.";
        return raw || "Something went wrong. Try again.";
      }

      const weekData = {
        mon:{ title:"Monday · Outlook", meta:"Set the week's bias", desc:"Start with the driver. End with one level that changes your mind.", bullets:["Primary driver (rates / USD / credit / oil)","Base case + 1 alternative scenario","Key level + invalidation"] },
        wed:{ title:"Wednesday · Momentum", meta:"Mid-week reality check", desc:"What's working, what's fading, and whether the move is healthy or crowded.", bullets:["Leadership + rotation snapshot","Crowding/stretch note (risk/reward)","What must happen next for the trend to continue"] },
        fri:{ title:"Friday · Recap", meta:"What changed (for real)", desc:"Did the driver change? Or just the story? You get the clean answer.", bullets:["What changed: driver vs narrative vs positioning","Winners/losers (with why)","Levels that matter into next week"] },
        sun:{ title:"Sunday · Macro Setup", meta:"The map into next week", desc:"What's priced in, what could surprise, and the one catalyst that matters most.", bullets:["Priced-in vs surprise framing","2–3 scenarios max","Catalyst calendar + watch points"] }
      };

      const weekCard = document.getElementById("weekCard");
      function renderDay(key){
        const d = weekData[key];
        weekCard.innerHTML = `
          <div class="weekCardTop">
            <div class="weekLabel">${d.title}</div>
            <div class="weekMeta">${d.meta}</div>
          </div>
          <div class="weekDesc">${d.desc}</div>
          <ul class="weekBullets">${d.bullets.map(b=>`<li>${b}</li>`).join("")}</ul>
        `;
      }
      renderDay("mon");
      document.querySelectorAll(".pill").forEach(p=>{
        p.addEventListener("click",()=>{
          document.querySelectorAll(".pill").forEach(x=>x.classList.remove("active"));
          p.classList.add("active");
          renderDay(p.dataset.day);
        });
      });

      function loadMiniSymbolOverview(targetId, symbol, height){
        const el = document.getElementById(targetId);
        if(!el) return;
        el.innerHTML = "";
        const s = document.createElement("script");
        s.src = "https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js";
        s.async = true;
        s.text = JSON.stringify({ symbol, width:"100%", height:height||280, locale:"en", dateRange:"3M", colorTheme:"dark", isTransparent:true, autosize:true });
        el.appendChild(s);
      }

      const rotNow = document.getElementById("rotNow");
      function loadRot(symbol, label){
        if(rotNow) rotNow.textContent = label || "";
        loadMiniSymbolOverview("rotChart", symbol, 250);
      }
      loadRot("FOREXCOM:SPXUSD","SPX");
      document.querySelectorAll("[data-rot]").forEach(btn=>{
        btn.addEventListener("click",()=>{
          document.querySelectorAll(".chartBtnSym").forEach(b=>b.classList.remove("active"));
          btn.classList.add("active");
          loadRot(btn.getAttribute("data-rot"), btn.getAttribute("data-label"));
        });
      });

      const watchFallback = document.getElementById("watchFallback");
      const watchOpenTV = document.getElementById("watchOpenTV");
      let watchFallbackTimer = null;
      function showFallback(symbol){ if(!watchFallback) return; watchFallback.style.display="block"; if(watchOpenTV) watchOpenTV.href="https://www.tradingview.com/chart/?symbol="+encodeURIComponent(symbol); }
      function hideFallback(){ if(watchFallbackTimer) clearTimeout(watchFallbackTimer); watchFallbackTimer=null; if(!watchFallback) return; watchFallback.style.display="none"; }
      function loadWatch(symbol){
        hideFallback();
        loadMiniSymbolOverview("watchChart", symbol, 300);
        watchFallbackTimer = setTimeout(()=>{ const el=document.getElementById("watchChart"); const hasIframe=el&&el.querySelector("iframe"); if(!hasIframe) showFallback(symbol); }, 5000);
      }
      loadWatch("FOREXCOM:SPXUSD");
      document.querySelectorAll(".watchBtn").forEach(btn=>{
        if(btn.hasAttribute("data-symbol")){
          btn.addEventListener("click",()=>{
            document.querySelectorAll(".watchBtn").forEach(b=>{ if(b.hasAttribute("data-symbol")) b.classList.remove("active"); });
            btn.classList.add("active");
            loadWatch(btn.dataset.symbol);
          });
        }
      });

      const SUPABASE_URL = "https://dxmdyperxyydqdshazcp.supabase.co";
      const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR4bWR5cGVyeHl5ZHFkc2hhemNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NjMyNDQsImV4cCI6MjA4NDUzOTI0NH0.nMKF2wi8FWX0eYrDzSyJE_CPl8XgSMx27fPlcZ9gVzI";
      let supabase = null;

      function setSignedOutUI(){
        chip.style.display="none"; openAuth.style.display=""; signout.style.display="none";
        
        const ps=document.getElementById("premiumStatus"); const psTop=document.getElementById("premiumStatusTop");
        if(ps) ps.style.display="none"; if(psTop) psTop.style.display="none";
      }
      function setSignedInUI(email, isPremium){
        chip.style.display="inline-flex"; chip.classList.toggle("premium",!!isPremium);
        chipText.textContent=(isPremium?"Premium · ":"Free · ")+email;
        openAuth.style.display="none"; signout.style.display="";
        
        const ps=document.getElementById("premiumStatus"); const psTop=document.getElementById("premiumStatusTop");
        if(ps){ ps.style.display=""; ps.textContent=isPremium?"You have premium access.":"Free account active."; }
        if(psTop){ psTop.style.display=""; psTop.textContent=isPremium?"You have premium access.":"Upgrade for full access."; }
      }
      async function fetchPremiumStatus(userId){
        const { data, error } = await supabase.from("profiles").select("is_premium, premium_until").eq("id", userId).single();
        if(error||!data) return false;
        if(data.premium_until){ const until=new Date(data.premium_until); if(until<new Date()) return false; }
        return !!data.is_premium;
      }

      document.getElementById("payLink").addEventListener("click",(e)=>{ e.preventDefault(); window.open(PAYMENT_LINK,"_blank"); });
      const goPremiumEl = document.getElementById("goPremium");
      if(goPremiumEl) goPremiumEl.addEventListener("click",(e)=>{ e.preventDefault(); window.location.href=PREMIUM_DASHBOARD; });
      const goPremiumTopEl = document.getElementById("goPremiumTop");
      if(goPremiumTopEl) goPremiumTopEl.addEventListener("click",(e)=>{ e.preventDefault(); window.location.href=PREMIUM_DASHBOARD; });

      let attempts = 0;
      const check = setInterval(()=>{
        attempts++;
        if(window.supabase && window.supabase.createClient){
          clearInterval(check);
          supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

          document.getElementById("authForm").addEventListener("submit", async(e)=>{
            e.preventDefault();
            authMsg.textContent = "";
            const emailVal = document.getElementById("email").value.trim();
            const passwordVal = document.getElementById("password").value;
            if(!emailVal||!passwordVal){ authMsg.textContent="Enter email + password."; return; }
            authSubmit.disabled = true;
            const originalText = authSubmit.textContent;
            authSubmit.textContent = mode==="signin" ? "Signing in..." : "Creating...";
            try {
              if(mode==="signin"){
                const { data, error } = await supabase.auth.signInWithPassword({ email:emailVal, password:passwordVal });
                if(error){ authMsg.textContent=humanErr(error); authSubmit.disabled=false; authSubmit.textContent=originalText; return; }
                if(!data||!data.user){ authMsg.textContent="Sign in failed."; authSubmit.disabled=false; authSubmit.textContent=originalText; return; }
                const isPremium = await fetchPremiumStatus(data.user.id);
                setSignedInUI(emailVal, isPremium);
                closeModal(authModal);
                window.location.href = isPremium ? PREMIUM_DASHBOARD : FREE_ACCOUNT_PAGE;
                return;
              }
              const { error } = await supabase.auth.signUp({ email:emailVal, password:passwordVal });
              if(error){ authMsg.textContent=humanErr(error); authSubmit.disabled=false; authSubmit.textContent=originalText; return; }
              authMsg.textContent = "Account created! Check your email to confirm, then sign in.";
              authSubmit.disabled=false; authSubmit.textContent=originalText;
            } catch(err){
              authMsg.textContent = "Error: "+(err.message||String(err));
              authSubmit.disabled=false; authSubmit.textContent=originalText;
            }
          });

          signout.addEventListener("click", async(e)=>{ e.preventDefault(); await supabase.auth.signOut(); setSignedOutUI(); });

          supabase.auth.getUser().then(async({ data:{ user } })=>{
            if(user){ const isPremium=await fetchPremiumStatus(user.id); setSignedInUI(user.email,isPremium); }
            else { setSignedOutUI(); }
          });

        } else if(attempts===1){ openAuth.style.display=""; }
        if(attempts>=100){ clearInterval(check); setSignedOutUI(); }
      }, 100);

      window.addEventListener("keydown",(e)=>{ if(e.key==="Escape"){ closeModal(authModal); closeModal(premiumModal); closeModal(tosModal); closeModal(refundModal); closeModal(privacyModal); } });

      // Legal modals
      const tosModal = document.getElementById("tosModal");
      const refundModal = document.getElementById("refundModal");
      const privacyModal = document.getElementById("privacyModal");

      document.getElementById("openTos").addEventListener("click",(e)=>{ e.preventDefault(); openModal(tosModal); });
      document.getElementById("closeTos").addEventListener("click",()=>closeModal(tosModal));
      document.getElementById("closeTos2").addEventListener("click",()=>closeModal(tosModal));
      tosModal.addEventListener("click",(e)=>{ if(e.target===tosModal) closeModal(tosModal); });

      document.getElementById("openRefund").addEventListener("click",(e)=>{ e.preventDefault(); openModal(refundModal); });
      document.getElementById("closeRefund").addEventListener("click",()=>closeModal(refundModal));
      document.getElementById("closeRefund2").addEventListener("click",()=>closeModal(refundModal));
      refundModal.addEventListener("click",(e)=>{ if(e.target===refundModal) closeModal(refundModal); });

      document.getElementById("openPrivacy").addEventListener("click",(e)=>{ e.preventDefault(); openModal(privacyModal); });
      document.getElementById("closePrivacy").addEventListener("click",()=>closeModal(privacyModal));
      document.getElementById("closePrivacy2").addEventListener("click",()=>closeModal(privacyModal));
      privacyModal.addEventListener("click",(e)=>{ if(e.target===privacyModal) closeModal(privacyModal); });

    })();
  </script>
</body>
</html>
